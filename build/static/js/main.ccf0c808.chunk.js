(this["webpackJsonpfresh-meat-frontend"]=this["webpackJsonpfresh-meat-frontend"]||[]).push([[0],{190:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n(10),r=n(0),c=n.n(r),o=n(21),s=n.n(o),l=n(93),d=n.n(l),u=n(234),j=n.n(u),p=d.a.get("connect.sid"),b=Object(a.makeVar)(Boolean(p)),m=j()({uri:"https://localhost:4000/graphql",credentials:"include"}),h=new a.ApolloClient({link:m,cache:new a.InMemoryCache({typePolicies:{Query:{fields:{isLoggedIn:{read:function(){return b()}}}}}})}),g=n(258),O=n(259),x=n(260),v=n(25),f=n(23),y=n(239),P=n(240),w=n(236),C=n(238),N=n(262),k=function(){return Object(i.jsxs)(N.a,{children:[Object(i.jsx)(w.a,{color:"inherit",href:"https://github.com/naIlSeong",rel:"noopener noreferrer",target:"_blank",children:Object(i.jsx)(C.a,{})}),Object(i.jsx)(N.a,{paddingY:"6px",children:Object(i.jsx)(w.a,{color:"inherit",href:"https://github.com/naIlSeong/fresh-meat-backend",rel:"noopener noreferrer",target:"_blank",children:"Backend Repo"})}),Object(i.jsxs)(N.a,{children:[Object(i.jsx)(w.a,{color:"inherit",href:"mailto:ilseongdev@gmail.com",rel:"noopener noreferrer",target:"_blank",children:"ilseongdev@gmail.com"}),Object(i.jsxs)(N.a,{paddingTop:"6px",children:["\xa9 ",(new Date).getFullYear()," Fresh meat"]})]})]})},D=Object(y.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",paddingTop:e.spacing(8)},footer:{paddingBottom:e.spacing(2),marginTop:"auto"}}})),I=function(){var e=D();return Object(i.jsx)("div",{className:e.root,children:Object(i.jsx)("footer",{className:e.footer,children:Object(i.jsx)(P.a,{maxWidth:"sm",children:Object(i.jsx)(k,{})})})})},T=n(11),M=n(241),W=n(242),S=n(61),B=n(147),F=n(244),L=n(16);function q(){var e=Object(L.a)(["\n  query meQuery {\n    me {\n      id\n      username\n      email\n    }\n  }\n"]);return q=function(){return e},e}var z=Object(a.gql)(q()),$=function(){return Object(a.useQuery)(z)};function U(){var e=Object(L.a)(["\n  mutation logout {\n    logout {\n      ok\n      error\n    }\n  }\n"]);return U=function(){return e},e}var R=Object(a.gql)(U()),V=function(){var e=Object(f.f)();return Object(a.useMutation)(R,{onCompleted:function(t){t.logout.ok&&(b(!1),e.push("/"),d.a.remove("connect.sid"),h.clearStore(),window.location.reload())}})},A=Object(y.a)((function(e){return{toolbar:{display:"flex",justifyContent:"space-between",paddingBottom:e.spacing(8),paddingTop:e.spacing(2)},toolbarTitle:{flex:1}}})),E=function(e){var t=e.title,n=Object(a.useReactiveVar)(b),r=Object(f.f)(),o=A(),s=$(),l=s.data,d=s.loading,u=V(),j=Object(T.a)(u,1)[0],p=c.a.useState(null),m=Object(T.a)(p,2),h=m[0],g=m[1],O=function(){g(null)};return Object(i.jsx)(c.a.Fragment,{children:Object(i.jsxs)(M.a,{className:o.toolbar,children:[Object(i.jsx)(W.a,{style:{marginRight:"36px"},size:"small",onClick:function(){r.push("/")},children:Object(i.jsx)("img",{alt:"home",width:"40px",height:"40px",src:"/meat-logo.png"})}),Object(i.jsx)(S.a,{component:"h2",variant:"h5",color:"inherit",align:"center",noWrap:!0,className:o.toolbarTitle,children:t}),Object(i.jsx)(W.a,{style:{width:"100px"},variant:"outlined",size:"small",onClick:function(e){g(e.currentTarget)},children:"Menu"}),Object(i.jsx)(B.a,{id:"simple-menu",anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:O,children:n?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(F.a,{onClick:function(){d&&O(),!d&&l&&(r.push("/my-profile"),O())},children:"Profile"}),Object(i.jsx)(F.a,{onClick:function(){r.push("/edit-account"),O()},children:"Edit account"}),Object(i.jsx)(F.a,{onClick:function(){j()},children:"Logout"})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(F.a,{onClick:function(){r.push("/login"),O()},children:"Login"}),Object(i.jsx)(F.a,{onClick:function(){r.push("/signup"),O()},children:"Sign Up"})]})})]})})},H=n(22),Q=Object(y.a)((function(e){return{paper:{height:"100vh",paddingTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"}}})),_=function(){var e=Q();return Object(i.jsxs)(P.a,{component:"main",maxWidth:"xs",children:[Object(i.jsx)(H.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Not found"})}),Object(i.jsxs)("div",{className:e.paper,children:[Object(i.jsx)(S.a,{variant:"h2",children:"Oops!"}),Object(i.jsx)(N.a,{paddingTop:"24px",children:Object(i.jsx)(S.a,{variant:"h5",children:"Not Found"})}),Object(i.jsx)(N.a,{paddingTop:"10px",paddingBottom:"16px",children:"This is not the page you are looking for T^T"}),Object(i.jsxs)(N.a,{children:["Go back to"," ",Object(i.jsx)(N.a,{component:"span",color:"secondary",children:Object(i.jsx)(v.b,{to:"/",style:{color:"#4c8c4a"},children:"Home"})})]})]})]})},Z=n(245),Y=n(8),G=function(e){var t=e.errorMessage;return Object(i.jsx)(S.a,{variant:"caption",color:"error",children:t})},J=n(266),K=Object(y.a)((function(e){return{submit:{margin:e.spacing(3,0,2)}}})),X=function(e){var t=e.message,n=e.validate,a=e.loading,r=K();return Object(i.jsx)(W.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:r.submit,disabled:n,children:a?Object(i.jsx)(Z.a,{size:24}):t})},ee=n(103),te=n.n(ee),ne=n(261),ie=n(32);function ae(){var e=Object(L.a)(["\n  mutation updateUser($input: UpdateUserDto!) {\n    updateUser(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return ae=function(){return e},e}var re=Object(a.gql)(ae()),ce=Object(y.a)((function(e){return{loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)},paper:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},deleteButton:{margin:e.spacing(5,0,2),backgroundColor:"#9a0007",color:"white","&.MuiButton-root:hover":{backgroundColor:"#650000"}}}})),oe=Object(Y.a)({root:{"& label.Mui-focused":{color:"white"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(ne.a),se=function(){var e,t,n,o,s=Object(a.useReactiveVar)(b),l=ce(),d=$(),u=d.data,j=d.loading,p=Object(f.f)(),m=V(),h=Object(T.a)(m,1)[0],g=Object(r.useState)(!1),O=Object(T.a)(g,2),x=O[0],v=O[1];Object(r.useEffect)((function(){s||p.push("/")}),[p,s]);var y=Object(ie.a)({mode:"onChange"}),w=y.register,C=y.handleSubmit,N=y.getValues,k=y.errors,D=y.formState,I=Object(a.useMutation)(re,{onCompleted:function(e){e.updateUser.ok&&h()}}),M=Object(T.a)(I,2),B=M[0],F=M[1],L=F.data,q=F.loading;return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(H.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Edit Account"})}),Object(i.jsx)("main",{children:Object(i.jsx)(P.a,{maxWidth:"md",children:j?Object(i.jsx)(P.a,{className:l.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):Object(i.jsx)(P.a,{maxWidth:"xs",children:Object(i.jsxs)("div",{className:l.paper,children:[Object(i.jsx)(J.a,{className:l.avatar,children:Object(i.jsx)(te.a,{})}),Object(i.jsx)(S.a,{component:"h1",variant:"h5",children:"Let's edit your profile!"}),Object(i.jsxs)("form",{className:l.form,noValidate:!0,onSubmit:C((function(){var e=N(),t=e.username,n=e.email,i=e.password;i!==e.confirmPassword?v(!0):(v(!1),t&&""===n&&""===i&&B({variables:{input:{username:t}}}),""===t&&n&&""===i&&B({variables:{input:{email:n}}}),""===t&&""===n&&i&&B({variables:{input:{password:i}}}),t&&n&&""===i&&B({variables:{input:{username:t,email:n}}}),t&&""===n&&i&&B({variables:{input:{username:t,password:i}}}),""===t&&n&&i&&B({variables:{input:{email:n,password:i}}}),t&&n&&i&&B({variables:{input:{username:t,email:n,password:i}}}))})),children:[Object(i.jsx)(oe,{variant:"outlined",margin:"normal",fullWidth:!0,name:"username",label:"New username",type:"text",id:"username",inputRef:w({validate:{sameUsername:function(e){return e!==(null===u||void 0===u?void 0:u.me.username)}}})}),"sameUsername"===(null===(e=k.username)||void 0===e?void 0:e.type)&&Object(i.jsx)("div",{children:Object(i.jsx)(G,{errorMessage:"Same username"})}),Object(i.jsx)(oe,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"New email",name:"email",autoComplete:"email",inputRef:w({pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/})}),"pattern"===(null===(t=k.email)||void 0===t?void 0:t.type)&&Object(i.jsx)("div",{children:Object(i.jsx)(G,{errorMessage:"Check email pattern"})}),Object(i.jsx)(oe,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"New password",type:"password",id:"password",inputRef:w({minLength:8})}),"minLength"===(null===(n=k.password)||void 0===n?void 0:n.type)&&Object(i.jsx)("div",{children:Object(i.jsx)(G,{errorMessage:"Password must be at least 8 chars"})}),Object(i.jsx)(oe,{variant:"outlined",margin:"normal",fullWidth:!0,name:"confirmPassword",label:"Confirm new password ",type:"password",id:"confirmPassword",inputRef:w({minLength:8})}),"minLength"===(null===(o=k.confirmPassword)||void 0===o?void 0:o.type)&&Object(i.jsx)("div",{children:Object(i.jsx)(G,{errorMessage:"Password must be at least 8 chars"})}),x&&Object(i.jsx)(G,{errorMessage:"Check password again"}),Object(i.jsx)(X,{message:"Update",validate:!D.isValid,loading:q}),(null===L||void 0===L?void 0:L.updateUser.error)&&Object(i.jsx)("div",{children:Object(i.jsx)(G,{errorMessage:L.updateUser.error})})]}),Object(i.jsx)(W.a,{type:"button",fullWidth:!0,variant:"contained",className:l.deleteButton,onClick:function(){p.push("/delete-account"),window.scrollTo(0,0)},children:"Delete account"})]})})})})]})},le=n(247),de=n(250),ue=n(249),je=n(248),pe=n(246),be=n(73),me=n.n(be),he=n(265),ge=n(254),Oe=n(252),xe=n(253),ve=n(251),fe=n(64);function ye(){var e=Object(L.a)(["\n  mutation updateBidding($input: UpdateBiddingDto!) {\n    updateBidding(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return ye=function(){return e},e}function Pe(){var e=Object(L.a)(["\n  mutation createBidding($input: CreateBiddingDto!) {\n    createBidding(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return Pe=function(){return e},e}function we(){var e=Object(L.a)(["\n  query getWaitingProducts($input: GetAllProductsDto!) {\n    getWaitingProducts(input: $input) {\n      ok\n      error\n      maxPage\n      products {\n        id\n        productName\n        description\n        startPrice\n        remainingTime\n        picture {\n          url\n        }\n      }\n    }\n  }\n"]);return we=function(){return e},e}function Ce(){var e=Object(L.a)(["\n  query getInProgressProducts($input: GetAllProductsDto!) {\n    getInProgressProducts(input: $input) {\n      ok\n      error\n      maxPage\n      products {\n        id\n        productName\n        description\n        bidPrice\n        remainingTime\n        picture {\n          url\n        }\n      }\n    }\n  }\n"]);return Ce=function(){return e},e}var Ne=Object(a.gql)(Ce()),ke=Object(a.gql)(we()),De=Object(a.gql)(Pe()),Ie=Object(a.gql)(ye()),Te=Object(y.a)((function(e){return{progressButton:{paddingBottom:e.spacing(4)},card:{height:"100%",display:"flex",flexDirection:"column"},cardImage:{paddingTop:"56.25%"},cardContent:{flexGrow:1},page:{paddingTop:e.spacing(4)},pageNumber:{backgroundColor:e.palette.secondary.main,width:"40px",height:"40px",fontSize:"large",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"},loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)},noContent:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:e.spacing(20)},uploadContainer:{display:"flex",justifyContent:"flex-end",marginTop:e.spacing(4)},uploadButton:{backgroundColor:me.a[900],color:"white",minWidth:"100px","&.MuiButton-root:hover":{backgroundColor:"#000051"}}}})),Me=function(){var e,t,n,o,s=Te(),l=Object(a.useReactiveVar)(b),d=Object(f.f)(),u=Object(r.useState)(!0),j=Object(T.a)(u,2),p=j[0],m=j[1],h=Object(r.useState)(1),g=Object(T.a)(h,2),O=g[0],x=g[1],v=Object(r.useState)(1),y=Object(T.a)(v,2),w=y[0],C=y[1],k=Object(a.useLazyQuery)(Ne,{variables:{input:{page:O}}}),D=Object(T.a)(k,2),I=D[0],M=D[1],B=M.data,F=M.loading,L=Object(a.useLazyQuery)(ke,{variables:{input:{page:w}}}),q=Object(T.a)(L,2),z=q[0],$=q[1],U=$.data,R=$.loading,V=Object(ie.a)(),A=V.register,E=V.handleSubmit,Q=V.getValues,_=Object(a.useMutation)(De,{onCompleted:function(e){e.createBidding.ok&&window.location.reload()}}),Y=Object(T.a)(_,2),G=Y[0],J=Y[1],K=J.data,X=J.loading,ee=Object(a.useMutation)(Ie,{onCompleted:function(e){e.updateBidding.ok&&window.location.reload()}}),te=Object(T.a)(ee,2),ae=te[0],re=te[1],ce=re.data,oe=re.loading;Object(r.useEffect)((function(){I(),z()}),[I,z]);var se=Object(r.useState)(!1),be=Object(T.a)(se,2),me=be[0],ye=be[1],Pe=Object(r.useState)(null),we=Object(T.a)(Pe,2),Ce=we[0],Me=we[1],We=Object(r.useState)(null),Se=Object(T.a)(We,2),Be=Se[0],Fe=Se[1],Le=Object(r.useState)(!0),qe=Object(T.a)(Le,2),ze=qe[0],$e=qe[1],Ue=function(e,t,n){ye(!0),Me(e),Fe(t),$e(n)},Re=function(){ye(!1)},Ve=function(e){var t=e.minutes,n=e.seconds;return e.completed?Object(i.jsx)("span",{style:{color:"#f44336",fontSize:"14px"},children:"Finished!"}):Object(i.jsxs)("span",{style:{color:"#ff7961",fontSize:"14px"},children:[t<10?"0".concat(t,"m"):"".concat(t,"m")," ",n<10?"0".concat(n,"s"):"".concat(n,"s")]})},Ae=Object(i.jsxs)("span",{children:["The Current price is"," ",Object(i.jsx)("span",{style:{fontWeight:"bold"},children:Be})," won. The bid price must be more than"," ",Object(i.jsx)("span",{style:{fontWeight:"bold"},children:Be})," won."]}),Ee=Object(i.jsxs)("span",{children:["If you are sure, Please type more than"," ",Object(i.jsx)("span",{style:{fontWeight:"bold"},children:Be})," to higher bid."]}),He=Object(i.jsxs)("span",{children:["The starting price is"," ",Object(i.jsx)("span",{style:{fontWeight:"bold"},children:Be})," won. Are you sure?"]}),Qe=Object(i.jsxs)("span",{children:["If you are sure, Please type"," ",Object(i.jsx)("span",{style:{fontWeight:"bold"},children:Be})," to bid."]});return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(H.a,{children:Object(i.jsx)("title",{children:"Fresh Meat"})}),Object(i.jsxs)("main",{children:[Object(i.jsxs)("div",{className:s.progressButton,children:[Object(i.jsx)(P.a,{maxWidth:"sm",children:Object(i.jsxs)(pe.a,{container:!0,spacing:2,justify:"center",children:[Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(W.a,{variant:p?"contained":"outlined",color:"secondary",style:{minWidth:"130px"},onClick:function(){return m(!0)},children:"In Progress"})}),Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(W.a,{variant:p?"outlined":"contained",color:"secondary",style:{minWidth:"130px"},onClick:function(){return m(!1)},children:"Waiting"})})]})}),l&&Object(i.jsx)(P.a,{className:s.uploadContainer,children:Object(i.jsx)(W.a,{className:s.uploadButton,variant:"contained",onClick:function(){d.push("/product/new")},children:"Upload"})})]}),Object(i.jsx)(P.a,{maxWidth:"md",children:Object(i.jsxs)(pe.a,{container:!0,spacing:4,children:[!0===p?Object(i.jsxs)(i.Fragment,{children:[F?Object(i.jsx)(P.a,{className:s.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):0===(null===B||void 0===B||null===(e=B.getInProgressProducts.products)||void 0===e?void 0:e.length)?Object(i.jsxs)(P.a,{className:s.noContent,children:[Object(i.jsx)(S.a,{variant:"h3",children:"Oops!"}),Object(i.jsx)(S.a,{variant:"subtitle1",children:"There is no product in progress \ud83e\uddb4"})]}):null===B||void 0===B||null===(t=B.getInProgressProducts.products)||void 0===t?void 0:t.map((function(e){return Object(i.jsx)(pe.a,{item:!0,xs:12,sm:6,md:4,children:Object(i.jsxs)(le.a,{className:s.card,children:[Object(i.jsx)(je.a,{className:s.cardImage,image:e.picture?e.picture.url:"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg",title:"Image title"}),Object(i.jsxs)(ue.a,{className:s.cardContent,children:[Object(i.jsx)(S.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.productName}),Object(i.jsx)(fe.a,{date:e.remainingTime,renderer:Ve}),Object(i.jsxs)(S.a,{variant:"subtitle1",children:[e.bidPrice," \u20a9"]}),Object(i.jsx)(P.a,{style:{minHeight:"50px",maxHeight:"50px",padding:0},children:Object(i.jsx)(S.a,{variant:"subtitle2",children:e.description?e.description:"No description"})})]}),Object(i.jsxs)(de.a,{children:[Object(i.jsx)(W.a,{size:"small",color:"primary",onClick:function(){d.push("/product/".concat(e.id))},children:"View"}),l&&Object(i.jsx)(W.a,{size:"small",color:"primary",onClick:function(){Ue(e.id,e.bidPrice?e.bidPrice:33,!0)},children:"Bidding"})]})]})},e.id)})),Object(i.jsx)(P.a,{children:Object(i.jsx)("div",{className:s.page,children:Object(i.jsx)(P.a,{maxWidth:"sm",children:Object(i.jsxs)(pe.a,{container:!0,spacing:2,justify:"center",children:[Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(W.a,{variant:"text",color:"secondary",onClick:function(){O>1&&(x(O-1),I(),window.scrollTo(0,0))},children:"\u25c0"})}),Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(N.a,{className:s.pageNumber,children:O})}),Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(W.a,{variant:"text",color:"secondary",onClick:function(){B&&null!==B.getInProgressProducts.maxPage&&O<B.getInProgressProducts.maxPage&&(x(O+1),I(),window.scrollTo(0,0))},children:"\u25b6"})})]})})})})]}):Object(i.jsxs)(i.Fragment,{children:[R?Object(i.jsx)(P.a,{className:s.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):0===(null===U||void 0===U||null===(n=U.getWaitingProducts.products)||void 0===n?void 0:n.length)?Object(i.jsxs)(P.a,{className:s.noContent,children:[Object(i.jsx)(S.a,{variant:"h3",children:"Oops!"}),Object(i.jsx)(S.a,{variant:"subtitle1",children:"There are no product waiting for auction \ud83e\uddb4"})]}):null===U||void 0===U||null===(o=U.getWaitingProducts.products)||void 0===o?void 0:o.map((function(e){return Object(i.jsx)(pe.a,{item:!0,xs:12,sm:6,md:4,children:Object(i.jsxs)(le.a,{className:s.card,children:[Object(i.jsx)(je.a,{className:s.cardImage,image:e.picture?e.picture.url:"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg",title:"Image title"}),Object(i.jsxs)(ue.a,{className:s.cardContent,children:[Object(i.jsx)(S.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.productName}),Object(i.jsxs)(S.a,{variant:"subtitle1",children:[e.startPrice," \u20a9"]}),Object(i.jsx)(P.a,{style:{minHeight:"50px",maxHeight:"50px",padding:0},children:Object(i.jsx)(S.a,{variant:"subtitle2",children:e.description?e.description:"No description"})})]}),Object(i.jsxs)(de.a,{children:[Object(i.jsx)(W.a,{size:"small",color:"primary",onClick:function(){d.push("/product/".concat(e.id))},children:"View"}),l&&Object(i.jsx)(W.a,{size:"small",color:"primary",onClick:function(){Ue(e.id,e.startPrice,!1)},children:"Bidding"})]})]})},e.id)})),Object(i.jsx)(P.a,{children:Object(i.jsx)("div",{className:s.page,children:Object(i.jsx)(P.a,{maxWidth:"sm",children:Object(i.jsxs)(pe.a,{container:!0,spacing:2,justify:"center",children:[Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(W.a,{variant:"text",color:"secondary",onClick:function(){w>1&&(C(w-1),z(),window.scrollTo(0,0))},children:"\u25c0"})}),Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(N.a,{className:s.pageNumber,children:w})}),Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(W.a,{variant:"text",color:"secondary",onClick:function(){U&&null!==U.getWaitingProducts.maxPage&&w<U.getWaitingProducts.maxPage&&(C(w+1),z(),window.scrollTo(0,0))},children:"\u25b6"})})]})})})})]}),Object(i.jsxs)(he.a,{open:me,onClose:Re,"aria-labelledby":"form-dialog-title",children:[Object(i.jsx)(ve.a,{id:"form-dialog-title",children:!0===ze?"Higher bid on a product":"Bid on a product"}),Object(i.jsxs)(Oe.a,{children:[Object(i.jsx)(xe.a,{children:!0===ze?Ae:He}),Object(i.jsx)(xe.a,{children:!0===ze?Ee:Qe}),(null===K||void 0===K?void 0:K.createBidding.error)&&Object(i.jsx)(xe.a,{color:"error",children:K.createBidding.error}),(null===ce||void 0===ce?void 0:ce.updateBidding.error)&&Object(i.jsx)(xe.a,{color:"error",children:ce.updateBidding.error}),Object(i.jsxs)("form",{onSubmit:E((function(){var e=Q().bidPrice;Ce&&(ze&&ae({variables:{input:{productId:Ce,bidPrice:+e}}}),ze||G({variables:{input:{productId:Ce,startPrice:+e}}}))})),children:[Object(i.jsx)(ne.a,{autoFocus:!0,margin:"dense",id:"bidPrice",label:!0===ze?"Current price: ".concat(Be):"Starting price: ".concat(Be),type:"text",fullWidth:!0,name:"bidPrice",inputRef:A}),Object(i.jsx)(W.a,{onClick:Re,color:"primary",children:"Cancel"}),Object(i.jsx)(W.a,{color:"primary",type:"submit",children:X||oe?Object(i.jsx)(Z.a,{size:24}):"Bidding"})]})]}),Object(i.jsx)(ge.a,{})]})]})})]})]})},We=n(145),Se=n.n(We);function Be(){var e=Object(L.a)(["\n  mutation deleteUser($input: DeleteUserDto!) {\n    deleteUser(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return Be=function(){return e},e}var Fe=Object(a.gql)(Be()),Le=Object(y.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},deleteButton:{margin:e.spacing(7,0,2),backgroundColor:"#9a0007",color:"white","&.MuiButton-root:hover":{backgroundColor:"#650000"}}}})),qe=Object(Y.a)({root:{"& label.Mui-focused":{color:"white"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(ne.a),ze=function(){var e,t=Object(a.useReactiveVar)(b),n=Object(f.f)(),o=Le(),s=V(),l=Object(T.a)(s,1)[0],d=Object(ie.a)({mode:"onChange"}),u=d.register,j=d.handleSubmit,p=d.getValues,m=d.formState,h=d.errors;Object(r.useEffect)((function(){t||n.push("/")}),[n,t]);var g=function(){var e=p().password;v({variables:{input:{password:e}}})},O=Object(a.useMutation)(Fe,{onCompleted:function(e){e.deleteUser.ok&&l()}}),x=Object(T.a)(O,2),v=x[0],y=x[1],w=y.data,C=y.loading;return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(H.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Delete Account"})}),Object(i.jsx)("main",{children:Object(i.jsx)(P.a,{maxWidth:"xs",children:Object(i.jsxs)("div",{className:o.paper,children:[Object(i.jsx)(J.a,{className:o.avatar,children:Object(i.jsx)(Se.a,{})}),Object(i.jsx)(S.a,{component:"h1",variant:"h5",children:"It was nice to meet you!"}),Object(i.jsxs)("form",{className:o.form,noValidate:!0,onSubmit:j(g),children:[Object(i.jsx)(qe,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",inputRef:u({minLength:8})}),"minLength"===(null===(e=h.password)||void 0===e?void 0:e.type)&&Object(i.jsx)("div",{children:Object(i.jsx)(G,{errorMessage:"Password must be at least 8 chars"})}),Object(i.jsx)(W.a,{type:"submit",fullWidth:!0,variant:"contained",className:o.deleteButton,disabled:!m.isValid,onClick:g,children:C?Object(i.jsx)(Z.a,{size:24}):"Delete account"}),(null===w||void 0===w?void 0:w.deleteUser.error)&&Object(i.jsx)("div",{children:Object(i.jsx)(G,{errorMessage:w.deleteUser.error})})]})]})})})]})};function $e(){var e=Object(L.a)(["\n  query userDetail($input: UserDetailDto!) {\n    userDetail(input: $input) {\n      ok\n      error\n      user {\n        id\n        username\n      }\n      inProgress {\n        id\n        productName\n        bidPrice\n        remainingTime\n      }\n      waiting {\n        id\n        productName\n        startPrice\n      }\n    }\n  }\n"]);return $e=function(){return e},e}var Ue=Object(a.gql)($e()),Re=Object(y.a)((function(e){return{loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)},productLoading:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:e.spacing(20)},mainContent:{display:"flex",flexDirection:"column",justifyContent:"center"},subtitle:{paddingTop:e.spacing(6),paddingBottom:e.spacing(2)},productList:{padding:0,minHeight:e.spacing(20)},productItems:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:0},waitingItems:{display:"flex",padding:0},inProgressItems:{display:"flex",padding:0},productTitle:{marginRight:"4px",textDecoration:"none",cursor:"pointer","&:hover":{textDecoration:"underline"}},countdown:{minWidth:e.spacing(8),display:"flex",justifyContent:"flex-end",alignItems:"center"},noProduct:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:e.spacing(20)}}})),Ve=function(){var e,t,n=Object(f.g)().id,o=Re(),s=Object(f.f)(),l=Object(a.useLazyQuery)(Ue,{variables:{input:{userId:+n}}}),d=Object(T.a)(l,2),u=d[0],j=d[1],p=j.data,b=j.loading;Object(r.useEffect)((function(){n||s.push("/"),u()}),[u,s,n]);var m=function(e){var t=e.minutes,n=e.seconds;return e.completed?Object(i.jsx)("span",{style:{color:"#f44336",fontSize:"14px"},children:"Finished!"}):Object(i.jsxs)("span",{style:{color:"#ff7961",fontSize:"14px"},children:[t<10?"0".concat(t,"m"):"".concat(t,"m")," ",n<10?"0".concat(n,"s"):"".concat(n,"s")]})};return(null===p||void 0===p?void 0:p.userDetail.ok)?Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(H.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - ".concat(null===p||void 0===p||null===(e=p.userDetail.user)||void 0===e?void 0:e.username)})}),Object(i.jsx)("main",{children:Object(i.jsx)(P.a,{maxWidth:"md",children:b&&!p?Object(i.jsx)(P.a,{className:o.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):Object(i.jsxs)(P.a,{maxWidth:"xs",className:o.mainContent,children:[Object(i.jsx)(S.a,{variant:"h4",children:"".concat(null===p||void 0===p||null===(t=p.userDetail.user)||void 0===t?void 0:t.username,"'s products")}),Object(i.jsx)(S.a,{variant:"h5",className:o.subtitle,children:"In progress"}),Object(i.jsx)(P.a,{className:o.productList,children:!b&&(null===p||void 0===p?void 0:p.userDetail.inProgress)?0===p.userDetail.inProgress.length?Object(i.jsx)(P.a,{className:o.noProduct,children:Object(i.jsx)(S.a,{variant:"overline",children:"There is no product in progress \ud83e\uddb4"})}):p.userDetail.inProgress.map((function(e){return Object(i.jsxs)(P.a,{className:o.productItems,children:[Object(i.jsxs)(P.a,{className:o.inProgressItems,children:[Object(i.jsx)(S.a,{variant:"subtitle1",onClick:function(){s.push("/product/".concat(e.id))},className:o.productTitle,children:e.productName}),Object(i.jsxs)(S.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]})]}),Object(i.jsx)(S.a,{variant:"subtitle1",className:o.countdown,children:Object(i.jsx)(fe.a,{date:e.remainingTime,renderer:m})})]})})):Object(i.jsx)(P.a,{className:o.productLoading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})})}),Object(i.jsx)(S.a,{variant:"h5",className:o.subtitle,children:"Waiting for auction"}),Object(i.jsx)(P.a,{className:o.productList,children:!b&&(null===p||void 0===p?void 0:p.userDetail.waiting)?0===p.userDetail.waiting.length?Object(i.jsx)(P.a,{className:o.noProduct,children:Object(i.jsx)(S.a,{variant:"overline",children:"There is no product waiting for auction \ud83e\uddb4"})}):p.userDetail.waiting.map((function(e){return Object(i.jsxs)(P.a,{className:o.waitingItems,children:[Object(i.jsx)(S.a,{variant:"subtitle1",onClick:function(){s.push("/product/".concat(e.id))},className:o.productTitle,children:e.productName}),Object(i.jsxs)(S.a,{variant:"subtitle1",children:["\u2219 ",e.startPrice,"\u20a9"]})]})})):Object(i.jsx)(P.a,{className:o.productLoading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})})})]})})})]}):Object(i.jsx)(_,{})};function Ae(){var e=Object(L.a)(["\n  query myProfile {\n    myProfile {\n      ok\n      error\n      uploadedProduct {\n        id\n        productName\n        bidPrice\n        progress\n      }\n      inProgressProduct {\n        id\n        productName\n        bidPrice\n        remainingTime\n      }\n      closedProduct {\n        id\n        productName\n        bidPrice\n      }\n      paidProduct {\n        id\n        productName\n        bidPrice\n      }\n      completedProduct {\n        id\n        productName\n        bidPrice\n      }\n    }\n  }\n"]);return Ae=function(){return e},e}var Ee,He=Object(a.gql)(Ae()),Qe=Object(y.a)((function(e){return{loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)},buttonContainer:{paddingTop:e.spacing(4)},mainContent:{display:"flex",flexDirection:"column",justifyContent:"center"},subtitle:{paddingTop:e.spacing(6),paddingBottom:e.spacing(2)},productList:{padding:0,minHeight:e.spacing(20)},noProduct:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:e.spacing(20)},productItems:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:0},waitingItems:{display:"flex",padding:0},inProgressItems:{display:"flex",padding:0},productTitle:{marginRight:"4px",textDecoration:"none",cursor:"pointer","&:hover":{textDecoration:"underline"}},productProgress:{marginLeft:"4px"},countdown:{minWidth:e.spacing(8),display:"flex",justifyContent:"flex-end",alignItems:"center"}}})),_e=function(){var e=Object(a.useReactiveVar)(b),t=Qe(),n=Object(f.f)(),o=Object(r.useState)(!0),s=Object(T.a)(o,2),l=s[0],d=s[1],u=$().data,j=Object(a.useLazyQuery)(Ue),p=Object(T.a)(j,2),m=p[0],h=p[1],g=h.data,O=h.loading,x=Object(a.useLazyQuery)(He),v=Object(T.a)(x,2),y=v[0],w=v[1],C=w.data,N=w.loading;Object(r.useEffect)((function(){e||n.push("/"),u||n.push("/"),u&&(m({variables:{input:{userId:u.me.id}}}),y())}),[u,n,m,y,e]);var k=function(e){var t=e.minutes,n=e.seconds;return e.completed?Object(i.jsx)("span",{style:{color:"#f44336",fontSize:"14px"},children:"Finished!"}):Object(i.jsxs)("span",{style:{color:"#ff7961",fontSize:"14px"},children:[t<10?"0".concat(t,"m"):"".concat(t,"m")," ",n<10?"0".concat(n,"s"):"".concat(n,"s")]})};return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(H.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - ".concat(null===u||void 0===u?void 0:u.me.username)})}),Object(i.jsx)("main",{children:Object(i.jsx)(P.a,{maxWidth:"md",children:O||N?Object(i.jsx)(P.a,{className:t.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):Object(i.jsxs)(P.a,{maxWidth:"xs",className:t.mainContent,children:[Object(i.jsx)(S.a,{variant:"h4",children:"".concat(null===u||void 0===u?void 0:u.me.username,"'s products")}),Object(i.jsxs)(pe.a,{container:!0,spacing:2,justify:"center",className:t.buttonContainer,children:[Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(W.a,{variant:l?"contained":"outlined",color:"secondary",style:{minWidth:"130px"},onClick:function(){return d(!0)},children:"Uploaded"})}),Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(W.a,{variant:l?"outlined":"contained",color:"secondary",style:{minWidth:"130px"},onClick:function(){return d(!1)},children:"Bidded"})})]}),!0===l&&(null===g||void 0===g?void 0:g.userDetail.inProgress)&&g.userDetail.waiting&&(null===C||void 0===C?void 0:C.myProfile.uploadedProduct)?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(S.a,{variant:"h5",className:t.subtitle,children:"In progress"}),Object(i.jsx)(P.a,{className:t.productList,children:0===g.userDetail.inProgress.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(S.a,{variant:"overline",children:"There is no product in progress \ud83e\uddb4"})}):g.userDetail.inProgress.map((function(e){return Object(i.jsxs)(P.a,{className:t.productItems,children:[Object(i.jsxs)(P.a,{className:t.inProgressItems,children:[Object(i.jsx)(S.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(S.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]})]}),Object(i.jsx)(S.a,{variant:"subtitle1",className:t.countdown,children:Object(i.jsx)(fe.a,{date:e.remainingTime,renderer:k})})]})}))}),Object(i.jsx)(S.a,{variant:"h5",className:t.subtitle,children:"Waiting for auction"}),Object(i.jsx)(P.a,{className:t.productList,children:0===g.userDetail.waiting.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(S.a,{variant:"overline",children:"There is no product waiting for auction \ud83e\uddb4"})}):g.userDetail.waiting.map((function(e){return Object(i.jsxs)(P.a,{className:t.waitingItems,children:[Object(i.jsx)(S.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(S.a,{variant:"subtitle1",children:["\u2219 ",e.startPrice,"\u20a9"]})]})}))}),Object(i.jsx)(S.a,{variant:"h5",className:t.subtitle,children:"Finished"}),Object(i.jsx)(P.a,{className:t.productList,children:0===C.myProfile.uploadedProduct.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(S.a,{variant:"overline",children:"There is no product finished \ud83e\uddb4"})}):C.myProfile.uploadedProduct.map((function(e){return Object(i.jsxs)(P.a,{className:t.waitingItems,children:[Object(i.jsx)(S.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(S.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]}),Object(i.jsxs)(S.a,{variant:"subtitle1",className:t.productProgress,children:["\u2219 ",e.progress]})]})}))})]}):Object(i.jsx)(i.Fragment,{}),!1===l&&(null===C||void 0===C?void 0:C.myProfile.inProgressProduct)&&C.myProfile.closedProduct&&C.myProfile.paidProduct&&C.myProfile.completedProduct?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(S.a,{variant:"h5",className:t.subtitle,children:"InProgress"}),Object(i.jsx)(P.a,{className:t.productList,children:0===C.myProfile.inProgressProduct.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(S.a,{variant:"overline",children:"There is no product in progress \ud83e\uddb4"})}):C.myProfile.inProgressProduct.map((function(e){return Object(i.jsxs)(P.a,{className:t.productItems,children:[Object(i.jsxs)(P.a,{className:t.inProgressItems,children:[Object(i.jsx)(S.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(S.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]})]}),Object(i.jsx)(S.a,{variant:"subtitle1",className:t.countdown,children:Object(i.jsx)(fe.a,{date:e.remainingTime,renderer:k})})]})}))}),Object(i.jsx)(S.a,{variant:"h5",className:t.subtitle,children:"Closed"}),Object(i.jsx)(P.a,{className:t.productList,children:0===C.myProfile.closedProduct.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(S.a,{variant:"overline",children:"There is no product closed \ud83e\uddb4"})}):C.myProfile.closedProduct.map((function(e){return Object(i.jsxs)(P.a,{className:t.waitingItems,children:[Object(i.jsx)(S.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(S.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]})]})}))}),Object(i.jsx)(S.a,{variant:"h5",className:t.subtitle,children:"Paid"}),Object(i.jsx)(P.a,{className:t.productList,children:0===C.myProfile.paidProduct.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(S.a,{variant:"overline",children:"There is no product waiting for payment \ud83e\uddb4"})}):C.myProfile.paidProduct.map((function(e){return Object(i.jsxs)(P.a,{className:t.waitingItems,children:[Object(i.jsx)(S.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(S.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]})]})}))}),Object(i.jsx)(S.a,{variant:"h5",className:t.subtitle,children:"Completed"}),Object(i.jsx)(P.a,{className:t.productList,children:0===C.myProfile.completedProduct.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(S.a,{variant:"overline",children:"There is no product completed \ud83e\uddb4"})}):C.myProfile.completedProduct.map((function(e){return Object(i.jsxs)(P.a,{className:t.waitingItems,children:[Object(i.jsx)(S.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(S.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]})]})}))})]}):Object(i.jsx)(i.Fragment,{})]})})})]})},Ze=n(41),Ye=n(268),Ge=n(255),Je=n(264),Ke=n(243),Xe=n(194),et=n(256);function tt(){var e=Object(L.a)(["\n  mutation deleteProduct($input: DeleteProductDto!) {\n    deleteProduct(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return tt=function(){return e},e}function nt(){var e=Object(L.a)(["\n  mutation editProgress($input: EditProgressDto!) {\n    editProgress(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return nt=function(){return e},e}function it(){var e=Object(L.a)(["\n  query productDetail($input: ProductDetailDto!) {\n    productDetail(input: $input) {\n      ok\n      error\n      product {\n        id\n        productName\n        startPrice\n        bidPrice\n        description\n        picture {\n          key\n          fileName\n        }\n        seller {\n          id\n          username\n        }\n        bidder {\n          id\n          username\n        }\n        progress\n      }\n    }\n  }\n"]);return it=function(){return e},e}!function(e){e.Closed="Closed",e.Completed="Completed",e.InProgress="InProgress",e.Paid="Paid",e.Waiting="Waiting"}(Ee||(Ee={}));var at=Object(a.gql)(it()),rt=Object(a.gql)(nt()),ct=Object(a.gql)(tt()),ot=Object(y.a)((function(e){return{loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)},stepper:{padding:e.spacing(3,0,8),backgroundColor:e.palette.primary.main},layout:Object(Ze.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),paper:Object(Ze.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),listItem:{padding:e.spacing(1,0)},textLink:{textDecoration:"none",color:e.palette.text.secondary,"&:hover":{textDecoration:"underline"}},buttonContainer:{padding:0,paddingTop:e.spacing(2),paddingBottom:e.spacing(6),display:"flex",justifyContent:"flex-end"},button:{backgroundColor:e.palette.secondary.main,color:"white",minWidth:"180px","&.MuiButton-root:hover":{backgroundColor:e.palette.secondary.dark}},deleteButton:{backgroundColor:"#9a0007",color:"white",minWidth:"180px","&.MuiButton-root:hover":{backgroundColor:"#650000"}},editButton:{marginRight:e.spacing(2),backgroundColor:e.palette.secondary.main,color:"white",minWidth:"180px","&.MuiButton-root:hover":{backgroundColor:e.palette.secondary.dark}}}})),st=function(){var e,t,n,o,s,l,d,u,j,p,m,h,g,O,x,y,w,C,N,k,D,I,M=Object(f.g)().id,B=Object(a.useReactiveVar)(b),F=ot(),L=Object(f.f)(),q=c.a.useState(0),z=Object(T.a)(q,2),U=z[0],R=z[1],V=c.a.useState(!1),A=Object(T.a)(V,2),E=A[0],Q=A[1],Y=$().data,J=Object(a.useLazyQuery)(at,{variables:{input:{productId:+M}}}),K=Object(T.a)(J,2),X=K[0],ee=K[1],te=ee.data,ne=ee.loading,ie=Object(a.useMutation)(rt,{onCompleted:function(e){e.editProgress.ok&&(fe(),window.location.reload(),window.scrollTo(0,0))}}),ae=Object(T.a)(ie,2),re=ae[0],ce=ae[1],oe=ce.data,se=ce.loading,le=Object(a.useMutation)(ct,{onCompleted:function(e){e.deleteProduct.ok&&(fe(),L.push("/"),window.location.reload(),window.scrollTo(0,0))}}),de=Object(T.a)(le,2),ue=de[0],je=de[1],pe=je.data,be=je.loading,me=function(){Q(!0)},fe=function(){Q(!1)};return Object(r.useEffect)((function(){var e,t,n,i,a;M||L.push("/"),M&&X({variables:{input:{productId:+M}}}),(null===te||void 0===te||null===(e=te.productDetail.product)||void 0===e?void 0:e.progress)===Ee.Waiting&&R(0),(null===te||void 0===te||null===(t=te.productDetail.product)||void 0===t?void 0:t.progress)===Ee.InProgress&&R(1),(null===te||void 0===te||null===(n=te.productDetail.product)||void 0===n?void 0:n.progress)===Ee.Closed&&R(2),(null===te||void 0===te||null===(i=te.productDetail.product)||void 0===i?void 0:i.progress)===Ee.Paid&&R(3),(null===te||void 0===te||null===(a=te.productDetail.product)||void 0===a?void 0:a.progress)===Ee.Completed&&R(4)}),[L,M,Y,null===te||void 0===te||null===(e=te.productDetail.product)||void 0===e?void 0:e.progress,X]),(null===te||void 0===te?void 0:te.productDetail.ok)?Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(H.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - ".concat(null===te||void 0===te||null===(t=te.productDetail.product)||void 0===t?void 0:t.productName)})}),Object(i.jsx)("main",{className:F.layout,children:Object(i.jsx)(P.a,{maxWidth:"md",children:ne&&(null===te||void 0===te?void 0:te.productDetail.product)?Object(i.jsx)(P.a,{className:F.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):Object(i.jsxs)("div",{children:[Object(i.jsx)(S.a,{variant:"h5",children:"Progress status"}),Object(i.jsx)(Ye.a,{activeStep:U,className:F.stepper,alternativeLabel:!0,children:["Waiting","In progress","Closed","Paid","Completed"].map((function(e){return Object(i.jsx)(Ge.a,{children:Object(i.jsx)(Je.a,{children:Object(i.jsx)(S.a,{variant:"overline",children:e})})},e)}))}),Object(i.jsx)(S.a,{variant:"h5",gutterBottom:!0,children:"Product detail"}),Object(i.jsxs)(Ke.a,{disablePadding:!0,children:[Object(i.jsx)(Xe.a,{className:F.listItem,children:Object(i.jsx)(et.a,{primary:"Product name",secondary:null===te||void 0===te||null===(o=te.productDetail.product)||void 0===o?void 0:o.productName})},null===te||void 0===te||null===(n=te.productDetail.product)||void 0===n?void 0:n.productName),Object(i.jsx)(Xe.a,{className:F.listItem,children:Object(i.jsx)(et.a,{primary:"Starting price",secondary:"".concat(null===te||void 0===te||null===(l=te.productDetail.product)||void 0===l?void 0:l.startPrice,"\u20a9")})},null===te||void 0===te||null===(s=te.productDetail.product)||void 0===s?void 0:s.startPrice),(null===te||void 0===te||null===(d=te.productDetail.product)||void 0===d?void 0:d.bidder)&&Object(i.jsx)(Xe.a,{className:F.listItem,children:Object(i.jsx)(et.a,{primary:"Current price",secondary:"".concat(null===te||void 0===te||null===(j=te.productDetail.product)||void 0===j?void 0:j.bidPrice,"\u20a9")})},null===te||void 0===te||null===(u=te.productDetail.product)||void 0===u?void 0:u.bidPrice),Object(i.jsx)(Xe.a,{className:F.listItem,children:Object(i.jsx)(et.a,{primary:"Seller",secondary:Object(i.jsx)(S.a,{variant:"body2",children:Object(i.jsx)(v.b,{to:"/user/".concat(null===te||void 0===te||null===(m=te.productDetail.product)||void 0===m?void 0:m.seller.id),className:F.textLink,children:null===te||void 0===te||null===(h=te.productDetail.product)||void 0===h?void 0:h.seller.username})})})},null===te||void 0===te||null===(p=te.productDetail.product)||void 0===p?void 0:p.seller.username),(null===te||void 0===te||null===(g=te.productDetail.product)||void 0===g?void 0:g.bidder)&&Object(i.jsx)(Xe.a,{className:F.listItem,children:Object(i.jsx)(et.a,{primary:"Buyer",secondary:Object(i.jsx)(S.a,{variant:"body2",children:Object(i.jsx)(v.b,{to:"/user/".concat(te.productDetail.product.bidder.id),className:F.textLink,children:te.productDetail.product.bidder.username})})})},null===te||void 0===te||null===(O=te.productDetail.product)||void 0===O?void 0:O.bidder.username)]}),B&&Object(i.jsxs)(P.a,{className:F.buttonContainer,children:[(null===te||void 0===te||null===(x=te.productDetail.product)||void 0===x?void 0:x.bidder)&&(null===Y||void 0===Y?void 0:Y.me.id)===te.productDetail.product.bidder.id&&te.productDetail.product.progress===Ee.Closed&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(W.a,{className:F.button,onClick:me,children:"Request confirm"}),Object(i.jsxs)(he.a,{open:E,onClose:fe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(i.jsx)(ve.a,{id:"alert-dialog-title",children:"Request confirm"}),Object(i.jsxs)(Oe.a,{children:[Object(i.jsx)(xe.a,{id:"alert-dialog-description",children:"Have you paid and would you like to ask for confirmation?"}),(null===oe||void 0===oe?void 0:oe.editProgress.error)&&Object(i.jsx)(G,{errorMessage:oe.editProgress.error})]}),Object(i.jsxs)(ge.a,{children:[Object(i.jsx)(W.a,{onClick:fe,color:"primary",children:"No"}),Object(i.jsx)(W.a,{onClick:function(){te.productDetail.product&&re({variables:{input:{productId:te.productDetail.product.id}}})},color:"primary",autoFocus:!0,children:se?Object(i.jsx)(Z.a,{size:14}):"Yes"})]})]})]}),(null===Y||void 0===Y?void 0:Y.me.id)===(null===te||void 0===te||null===(y=te.productDetail.product)||void 0===y?void 0:y.seller.id)&&(null===te||void 0===te||null===(w=te.productDetail.product)||void 0===w?void 0:w.progress)===Ee.Paid&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(W.a,{className:F.button,onClick:me,children:"Confirm payment"}),Object(i.jsxs)(he.a,{open:E,onClose:fe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(i.jsx)(ve.a,{id:"alert-dialog-title",children:"Confirm payment"}),Object(i.jsxs)(Oe.a,{children:[Object(i.jsx)(xe.a,{id:"alert-dialog-description",children:"Have you received payment and want to complete the transaction?"}),(null===oe||void 0===oe?void 0:oe.editProgress.error)&&Object(i.jsx)(G,{errorMessage:oe.editProgress.error})]}),Object(i.jsxs)(ge.a,{children:[Object(i.jsx)(W.a,{onClick:fe,color:"primary",children:"Cancel"}),Object(i.jsx)(W.a,{onClick:function(){te.productDetail.product&&re({variables:{input:{productId:te.productDetail.product.id}}})},color:"primary",autoFocus:!0,children:se?Object(i.jsx)(Z.a,{size:14}):"Yes"})]})]})]}),(null===Y||void 0===Y?void 0:Y.me.id)===(null===te||void 0===te||null===(C=te.productDetail.product)||void 0===C?void 0:C.seller.id)&&(null===te||void 0===te||null===(N=te.productDetail.product)||void 0===N?void 0:N.progress)===Ee.Waiting&&Object(i.jsx)(W.a,{className:F.editButton,onClick:function(){var e;L.push("/edit-product/".concat(null===(e=te.productDetail.product)||void 0===e?void 0:e.id)),window.scrollTo(0,0)},children:"Edit product"}),(null===Y||void 0===Y?void 0:Y.me.id)===(null===te||void 0===te||null===(k=te.productDetail.product)||void 0===k?void 0:k.seller.id)&&((null===te||void 0===te||null===(D=te.productDetail.product)||void 0===D?void 0:D.progress)===Ee.Waiting||(null===te||void 0===te||null===(I=te.productDetail.product)||void 0===I?void 0:I.progress)===Ee.Completed)&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(W.a,{className:F.deleteButton,onClick:me,children:"Delete product"}),Object(i.jsxs)(he.a,{open:E,onClose:fe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(i.jsx)(ve.a,{id:"alert-dialog-title",children:"Delete product"}),Object(i.jsxs)(Oe.a,{children:[Object(i.jsx)(xe.a,{id:"alert-dialog-description",children:"Are you sure you want to delete the product?"}),(null===pe||void 0===pe?void 0:pe.deleteProduct.error)&&Object(i.jsx)(G,{errorMessage:pe.deleteProduct.error})]}),Object(i.jsxs)(ge.a,{children:[Object(i.jsx)(W.a,{onClick:fe,color:"primary",children:"Cancel"}),Object(i.jsx)(W.a,{onClick:function(){te.productDetail.product&&ue({variables:{input:{productId:te.productDetail.product.id}}})},color:"primary",autoFocus:!0,children:be?Object(i.jsx)(Z.a,{size:14}):"Yes"})]})]})]})]})]})})})]}):Object(i.jsx)(_,{})},lt=n(104),dt=n.n(lt);function ut(){var e=Object(L.a)(["\n  mutation login($input: LoginDto!) {\n    login(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return ut=function(){return e},e}var jt=Object(a.gql)(ut()),pt=Object(Y.a)({root:{"& label.Mui-focused":{color:"white"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(ne.a),bt=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)}}})),mt=function(){var e,t,n=bt(),r=Object(f.f)(),c=Object(ie.a)({mode:"onChange"}),o=c.register,s=c.handleSubmit,l=c.getValues,d=c.errors,u=c.formState,j=Object(a.useMutation)(jt,{onCompleted:function(e){e.login.ok&&(b(!0),r.push("/"),window.location.reload())}}),p=Object(T.a)(j,2),m=p[0],h=p[1],g=h.data,O=h.loading;return Object(i.jsxs)(P.a,{component:"main",maxWidth:"xs",children:[Object(i.jsx)(H.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Login"})}),Object(i.jsxs)("div",{className:n.paper,children:[Object(i.jsx)(J.a,{className:n.avatar,children:Object(i.jsx)(dt.a,{})}),Object(i.jsx)(S.a,{component:"h1",variant:"h5",children:"Welcome back!"}),Object(i.jsxs)("form",{className:n.form,noValidate:!0,onSubmit:s((function(){var e=l(),t=e.email,n=e.password;m({variables:{input:{email:t,password:n}}})})),children:[Object(i.jsx)(pt,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",autoFocus:!0,inputRef:o({required:!0,pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/})}),"pattern"===(null===(e=d.email)||void 0===e?void 0:e.type)&&Object(i.jsx)(G,{errorMessage:"Check email pattern"}),Object(i.jsx)(pt,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:o({required:!0,minLength:8})}),"minLength"===(null===(t=d.password)||void 0===t?void 0:t.type)&&Object(i.jsx)(G,{errorMessage:"Password must be at least 8 chars"}),Object(i.jsx)(X,{message:"Login",validate:!u.isValid,loading:O}),(null===g||void 0===g?void 0:g.login.error)&&Object(i.jsx)(G,{errorMessage:g.login.error}),Object(i.jsx)(pe.a,{container:!0,children:Object(i.jsxs)(pe.a,{item:!0,children:["Don't have an account?"," ",Object(i.jsx)(w.a,{href:"/signup",variant:"body2",color:"secondary",children:"Sign Up"})]})})]})]})]})};function ht(){var e=Object(L.a)(["\n  mutation createUser($input: CreateUserDto!) {\n    createUser(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return ht=function(){return e},e}var gt=Object(a.gql)(ht()),Ot=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)}}})),xt=Object(Y.a)({root:{"& label.Mui-focused":{color:"white"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(ne.a),vt=function(){var e,t,n=Ot(),r=Object(f.f)(),c=Object(ie.a)({mode:"onChange"}),o=c.register,s=c.handleSubmit,l=c.getValues,d=c.errors,u=c.formState,j=Object(a.useMutation)(gt,{onCompleted:function(e){e.createUser.ok&&r.push("/")}}),p=Object(T.a)(j,2),b=p[0],m=p[1],h=m.data,g=m.loading;return Object(i.jsxs)(P.a,{component:"main",maxWidth:"xs",children:[Object(i.jsx)(H.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Signup"})}),Object(i.jsxs)("div",{className:n.paper,children:[Object(i.jsx)(J.a,{className:n.avatar,children:Object(i.jsx)(dt.a,{})}),Object(i.jsx)(S.a,{component:"h1",variant:"h5",children:"Welcome!"}),Object(i.jsxs)("form",{className:n.form,noValidate:!0,onSubmit:s((function(){var e=l(),t=e.username,n=e.email,i=e.password;b({variables:{input:{username:t,email:n,password:i}}})})),children:[Object(i.jsx)(xt,{margin:"normal",autoComplete:"fname",name:"username",variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"User Name",autoFocus:!0,inputRef:o({required:!0})}),Object(i.jsx)(xt,{margin:"normal",variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",inputRef:o({required:!0,pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/})}),"pattern"===(null===(e=d.email)||void 0===e?void 0:e.type)&&Object(i.jsx)(G,{errorMessage:"Check email pattern"}),Object(i.jsx)(xt,{margin:"normal",variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:o({required:!0,minLength:8})}),"minLength"===(null===(t=d.password)||void 0===t?void 0:t.type)&&Object(i.jsx)(G,{errorMessage:"Password must be at least 8 chars"}),Object(i.jsx)(X,{message:"Sign Up",validate:!u.isValid,loading:g}),(null===h||void 0===h?void 0:h.createUser.error)&&Object(i.jsx)(G,{errorMessage:h.createUser.error}),Object(i.jsx)(pe.a,{container:!0,children:Object(i.jsxs)(pe.a,{item:!0,children:["Already have an account?"," ",Object(i.jsx)(w.a,{href:"/login",variant:"body2",color:"secondary",children:"Log in"})]})})]})]})]})},ft=n(257),yt=n(146),Pt=n.n(yt);function wt(){var e=Object(L.a)(["\n  mutation uploadImage($productId: Float!, $file: Upload!) {\n    uploadImage(productId: $productId, file: $file) {\n      ok\n      error\n    }\n  }\n"]);return wt=function(){return e},e}function Ct(){var e=Object(L.a)(["\n  mutation uploadProduct($input: UploadProductDto!) {\n    uploadProduct(input: $input) {\n      ok\n      error\n      productId\n    }\n  }\n"]);return Ct=function(){return e},e}var Nt=Object(a.gql)(Ct()),kt=Object(a.gql)(wt()),Dt=Object(y.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},buttonContainer:{margin:e.spacing(2,0,6),padding:0},button:{backgroundColor:me.a[900],color:"white","&.MuiButton-root:hover":{backgroundColor:"#000051"}},fileList:{padding:e.spacing(2,0),display:"flex",justifyContent:"space-between",alignItems:"center"},deleteButton:{padding:e.spacing(.4,1.2),backgroundColor:"#9a0007",color:"white","&.MuiButton-root:hover":{backgroundColor:"#650000"}},loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)}}})),It=Object(Y.a)({root:{"& label.Mui-focused":{color:"white"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(ne.a),Tt=function(){var e,t=Object(a.useReactiveVar)(b),n=Object(f.f)(),o=Dt(),s=Object(r.useState)(),l=Object(T.a)(s,2),d=l[0],u=l[1],j=Object(r.useState)(),p=Object(T.a)(j,2),m=p[0],h=p[1];Object(r.useEffect)((function(){t||n.push("/")}),[n,t]);var g=Object(a.useMutation)(Nt,{onCompleted:function(e){var t=q().image,i=e.uploadProduct,a=i.ok,r=i.productId;a&&r&&t[0]?(k({variables:{productId:r,file:t[0]}}),h(r)):(n.push("/product/".concat(r)),window.scrollTo(0,0))}}),O=Object(T.a)(g,2),x=O[0],v=O[1],y=v.data,w=v.loading,C=Object(a.useMutation)(kt,{onCompleted:function(e){e.uploadImage.ok&&(n.push("/product/".concat(m)),window.scrollTo(0,0))}}),N=Object(T.a)(C,2),k=N[0],D=N[1],I=D.data,M=D.loading,B=Object(ie.a)({mode:"onChange"}),F=B.register,L=B.handleSubmit,q=B.getValues,z=B.watch,$=B.errors,U=B.formState,R=B.reset;return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(H.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Upload Product"})}),Object(i.jsx)("main",{children:Object(i.jsx)(P.a,{maxWidth:"md",children:Object(i.jsxs)(P.a,{className:o.paper,maxWidth:"xs",children:[Object(i.jsx)(J.a,{className:o.avatar,children:Object(i.jsx)(Pt.a,{})}),Object(i.jsx)(S.a,{component:"h1",variant:"h5",children:"Let's sell something!"}),Object(i.jsxs)("form",{className:o.form,noValidate:!0,onSubmit:L((function(){var e=q(),t=e.productName,n=e.description,i=e.startPrice;x({variables:{input:{productName:t,description:n,startPrice:+i}}})})),children:[Object(i.jsx)(It,{variant:"outlined",margin:"normal",fullWidth:!0,name:"productName",label:"Product name",type:"text",id:"productName",required:!0,inputRef:F({required:!0})}),Object(i.jsx)(It,{variant:"outlined",margin:"normal",fullWidth:!0,name:"description",label:"Description",type:"text",id:"description",inputRef:F}),Object(i.jsx)(It,{variant:"outlined",margin:"normal",fullWidth:!0,name:"startPrice",label:"Starting Price",type:"text",id:"startPrice",required:!0,inputRef:F({required:!0,pattern:/^\d+$/}),InputProps:{startAdornment:Object(i.jsx)(ft.a,{position:"start",children:"\u20a9"})}}),"pattern"===(null===(e=$.startPrice)||void 0===e?void 0:e.type)&&Object(i.jsx)(G,{errorMessage:"Only numbers are allowed"}),Object(i.jsxs)(P.a,{className:o.buttonContainer,children:[Object(i.jsxs)(W.a,{variant:"contained",fullWidth:!0,className:o.button,component:"label",children:[Object(i.jsx)("input",{type:"file",accept:"image/*",id:"image",name:"image",hidden:!0,ref:F,onChange:function(){u(z().image[0].name)}}),"Select File"]}),d&&Object(i.jsxs)(P.a,{className:o.fileList,children:[Object(i.jsx)(S.a,{children:"File : ".concat(d)}),Object(i.jsx)(W.a,{className:o.deleteButton,variant:"contained",onClick:function(){R(),u(null)},children:"Reset"})]})]}),Object(i.jsx)(X,{message:"Upload",loading:w||M,validate:!U.isValid}),(null===y||void 0===y?void 0:y.uploadProduct.error)&&Object(i.jsx)(G,{errorMessage:y.uploadProduct.error}),(null===I||void 0===I?void 0:I.uploadImage.error)&&Object(i.jsx)(G,{errorMessage:I.uploadImage.error})]})]})})})]})};function Mt(){var e=Object(L.a)(["\n  mutation editProduct($input: EditProductDto!) {\n    editProduct(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return Mt=function(){return e},e}var Wt=Object(a.gql)(Mt()),St=Object(y.a)((function(e){return{loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)},paper:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},buttonContainer:{margin:e.spacing(2,0,6),padding:0},button:{backgroundColor:me.a[900],color:"white","&.MuiButton-root:hover":{backgroundColor:"#000051"}},fileList:{padding:e.spacing(2,0),display:"flex",justifyContent:"space-between",alignItems:"center"},deleteButton:{padding:e.spacing(.4,1.2),backgroundColor:"#9a0007",color:"white","&.MuiButton-root:hover":{backgroundColor:"#650000"}}}})),Bt=Object(Y.a)({root:{"& label.Mui-focused":{color:"white"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(ne.a),Ft=function(){var e,t,n=Object(f.g)().id,o=Object(f.f)(),s=St(),l=Object(r.useState)(),d=Object(T.a)(l,2),u=d[0],j=d[1],p=Object(r.useState)(!1),b=Object(T.a)(p,2),m=b[0],h=b[1],g=Object(r.useState)(!1),O=Object(T.a)(g,2),x=O[0],v=O[1],y=Object(r.useState)(),w=Object(T.a)(y,2),C=w[0],N=w[1],k=$(),D=k.data,I=k.loading,M=Object(a.useLazyQuery)(at),B=Object(T.a)(M,2),F=B[0],L=B[1],q=L.data,z=L.loading;Object(r.useEffect)((function(){var e,t;(n||o.push("/"),n&&F({variables:{input:{productId:+n}}}),!z&&(null===q||void 0===q?void 0:q.productDetail.ok))&&j(null===(e=q.productDetail.product)||void 0===e||null===(t=e.picture)||void 0===t?void 0:t.fileName)}),[o,n,F,z,q]);var U=Object(ie.a)({mode:"onChange"}),R=U.register,V=U.handleSubmit,A=U.getValues,E=U.errors,Q=U.formState,Y=U.reset,K=U.watch,ee=Object(a.useMutation)(Wt,{onCompleted:function(e){var t=A().image;e.editProduct.ok&&(m&&(null===q||void 0===q?void 0:q.productDetail.product)&&de({variables:{productId:q.productDetail.product.id,file:t[0]}}),m||(o.push("/product/".concat(C)),window.scrollTo(0,0),window.location.reload()))}}),ne=Object(T.a)(ee,2),ae=ne[0],re=ne[1],ce=re.data,oe=re.loading,se=Object(a.useMutation)(kt,{onCompleted:function(e){e.uploadImage.ok&&(o.push("/product/".concat(C)),window.scrollTo(0,0),window.location.reload())}}),le=Object(T.a)(se,2),de=le[0],ue=le[1],je=ue.data,pe=ue.loading;return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(H.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Edit Product"})}),Object(i.jsx)("main",{children:Object(i.jsx)(P.a,{maxWidth:"md",children:I||z?Object(i.jsx)(P.a,{className:s.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):D&&(null===q||void 0===q?void 0:q.productDetail.ok)&&D.me.id===(null===(e=q.productDetail.product)||void 0===e?void 0:e.seller.id)?Object(i.jsx)(P.a,{maxWidth:"xs",children:Object(i.jsxs)("div",{className:s.paper,children:[Object(i.jsx)(J.a,{className:s.avatar,children:Object(i.jsx)(te.a,{})}),Object(i.jsx)(S.a,{component:"h1",variant:"h5",children:"Let's edit your product!"}),Object(i.jsxs)("form",{className:s.form,noValidate:!0,onSubmit:V((function(){var e,t=A(),i=t.productName,a=t.description,r=t.startPrice;N(null===q||void 0===q||null===(e=q.productDetail.product)||void 0===e?void 0:e.id),ae({variables:{input:{productId:+n,productName:i,description:a,startPrice:+r,deleteImage:x}}})})),children:[Object(i.jsx)(Bt,{variant:"outlined",margin:"normal",fullWidth:!0,name:"productName",label:"New product name",type:"text",id:"productName",required:!0,defaultValue:q.productDetail.product.productName,inputRef:R({required:!0})}),Object(i.jsx)(Bt,{variant:"outlined",margin:"normal",fullWidth:!0,name:"description",label:"New description",type:"text",id:"description",defaultValue:q.productDetail.product.description?q.productDetail.product.description:"",inputRef:R}),Object(i.jsx)(Bt,{variant:"outlined",margin:"normal",fullWidth:!0,name:"startPrice",label:"New starting price",type:"text",id:"startPrice",required:!0,defaultValue:q.productDetail.product.startPrice,inputRef:R({required:!0,pattern:/^\d+$/})}),"pattern"===(null===(t=E.startPrice)||void 0===t?void 0:t.type)&&Object(i.jsx)(G,{errorMessage:"Only numbers are allowed"}),Object(i.jsxs)(P.a,{className:s.buttonContainer,children:[Object(i.jsxs)(W.a,{variant:"contained",fullWidth:!0,className:s.button,component:"label",children:[Object(i.jsx)("input",{type:"file",accept:"image/*",id:"image",name:"image",hidden:!0,ref:R,onChange:function(){j(K().image[0].name),h(!0),v(!0)}}),"Select File"]}),u&&Object(i.jsxs)(P.a,{className:s.fileList,children:[Object(i.jsx)(S.a,{children:"File : ".concat(u)}),Object(i.jsx)(W.a,{className:s.deleteButton,variant:"contained",onClick:function(){Y(),j(null),h(!1),v(!0)},children:"Delete"})]})]}),Object(i.jsx)(X,{message:"Update",validate:!Q.isValid,loading:oe||pe}),(null===ce||void 0===ce?void 0:ce.editProduct.error)&&Object(i.jsx)(G,{errorMessage:ce.editProduct.error}),(null===je||void 0===je?void 0:je.uploadImage.error)&&Object(i.jsx)(G,{errorMessage:je.uploadImage.error})]})]})}):Object(i.jsx)(_,{})})})]})},Lt=function(){return Object(i.jsxs)(v.a,{children:[Object(i.jsxs)(f.c,{children:[Object(i.jsxs)(f.a,{path:"/edit-account",exact:!0,children:[Object(i.jsx)(E,{title:"Edit Account"}),Object(i.jsx)(se,{})]}),Object(i.jsxs)(f.a,{path:"/delete-account",exact:!0,children:[Object(i.jsx)(E,{title:"Delete Account"}),Object(i.jsx)(ze,{})]}),Object(i.jsxs)(f.a,{path:"/my-profile",exact:!0,children:[Object(i.jsx)(E,{title:"My Profile"}),Object(i.jsx)(_e,{})]}),Object(i.jsxs)(f.a,{path:"/product/new",exact:!0,children:[Object(i.jsx)(E,{title:"Upload Product"}),Object(i.jsx)(Tt,{})]}),Object(i.jsxs)(f.a,{path:"/edit-product/:id",exact:!0,children:[Object(i.jsx)(E,{title:"Edit Product"}),Object(i.jsx)(Ft,{})]}),Object(i.jsxs)(f.a,{path:"/login",exact:!0,children:[Object(i.jsx)(E,{title:"Login"}),Object(i.jsx)(mt,{})]}),Object(i.jsxs)(f.a,{path:"/signup",exact:!0,children:[Object(i.jsx)(E,{title:"Sign up"}),Object(i.jsx)(vt,{})]}),Object(i.jsxs)(f.a,{path:"/user/:id",exact:!0,children:[Object(i.jsx)(E,{title:"Profile"}),Object(i.jsx)(Ve,{})]}),Object(i.jsxs)(f.a,{path:"/product/:id",exact:!0,children:[Object(i.jsx)(E,{title:"Product Detail"}),Object(i.jsx)(st,{})]}),Object(i.jsxs)(f.a,{path:"/",exact:!0,children:[Object(i.jsx)(E,{title:"Fresh Meat"}),Object(i.jsx)(Me,{})]}),Object(i.jsxs)(f.a,{children:[Object(i.jsx)(E,{title:"Not Found"}),Object(i.jsx)(_,{})]})]}),Object(i.jsx)(I,{})]})},qt=n(105),zt=Object(qt.a)({palette:{type:"dark",primary:{light:"#484848",main:"#212121",dark:"#000000",contrastText:"#ffffff"},secondary:{light:"#4c8c4a",main:"#1b5e20",dark:"#003300",contrastText:"#ffffff"}},overrides:{MuiStepIcon:{root:{"&$completed":{color:"#1b5e20"},"&$active":{color:"#1b5e20"}}},MuiCssBaseline:{"@global":{body:{fontSize:"12px",minHeight:"100vh",backgroundColor:"#212121"}}}}});var $t=function(){var e=Object(g.a)(zt);return Object(i.jsxs)(O.a,{theme:e,children:[Object(i.jsx)(x.a,{}),Object(i.jsx)(Lt,{})]})},Ut=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,270)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))};s.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsxs)(a.ApolloProvider,{client:h,children:[Object(i.jsx)(x.a,{}),Object(i.jsx)(H.b,{children:Object(i.jsx)($t,{})})]})}),document.getElementById("root")),Ut()}},[[190,1,2]]]);
//# sourceMappingURL=main.ccf0c808.chunk.js.map