(this["webpackJsonpfresh-meat-frontend"]=this["webpackJsonpfresh-meat-frontend"]||[]).push([[0],{190:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n(10),r=n(0),c=n.n(r),o=n(21),s=n.n(o),l=n(93),d=n.n(l),u=n(234),j=n.n(u),p=d.a.get("connect.sid"),b=Object(a.makeVar)(Boolean(p)),m=j()({uri:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_DOMAIN,credentials:"include"}),h=new a.ApolloClient({link:m,cache:new a.InMemoryCache({typePolicies:{Query:{fields:{isLoggedIn:{read:function(){return b()}}}}}})}),O=n(258),g=n(259),x=n(260),v=n(25),f=n(23),y=n(239),P=n(240),C=n(236),w=n(238),N=n(262),k=function(){return Object(i.jsxs)(N.a,{children:[Object(i.jsx)(C.a,{color:"inherit",href:"https://github.com/naIlSeong",rel:"noopener noreferrer",target:"_blank",children:Object(i.jsx)(w.a,{})}),Object(i.jsx)(N.a,{paddingY:"6px",children:Object(i.jsx)(C.a,{color:"inherit",href:"https://github.com/naIlSeong/fresh-meat-backend",rel:"noopener noreferrer",target:"_blank",children:"Backend Repo"})}),Object(i.jsxs)(N.a,{children:[Object(i.jsx)(C.a,{color:"inherit",href:"mailto:ilseongdev@gmail.com",rel:"noopener noreferrer",target:"_blank",children:"ilseongdev@gmail.com"}),Object(i.jsxs)(N.a,{paddingTop:"6px",children:["\xa9 ",(new Date).getFullYear()," Fresh meat"]})]})]})},D=Object(y.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",paddingTop:e.spacing(8)},footer:{paddingBottom:e.spacing(2),marginTop:"auto"}}})),I=function(){var e=D();return Object(i.jsx)("div",{className:e.root,children:Object(i.jsx)("footer",{className:e.footer,children:Object(i.jsx)(P.a,{maxWidth:"sm",children:Object(i.jsx)(k,{})})})})},T=n(11),M=n(241),S=n(242),W=n(61),B=n(147),F=n(244),L=n(16);function z(){var e=Object(L.a)(["\n  query meQuery {\n    me {\n      id\n      username\n      email\n    }\n  }\n"]);return z=function(){return e},e}var q=Object(a.gql)(z()),R=function(){return Object(a.useQuery)(q)};function $(){var e=Object(L.a)(["\n  mutation logout {\n    logout {\n      ok\n      error\n    }\n  }\n"]);return $=function(){return e},e}var U=Object(a.gql)($()),E=function(){var e=Object(f.f)();return Object(a.useMutation)(U,{onCompleted:function(t){t.logout.ok&&(b(!1),e.push("/"),d.a.remove("connect.sid",{domain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).DOMAIN}),h.clearStore(),window.location.reload())}})},V=Object(y.a)((function(e){return{toolbar:{display:"flex",justifyContent:"space-between",paddingBottom:e.spacing(8),paddingTop:e.spacing(2)},toolbarTitle:{flex:1}}})),A=function(e){var t=e.title,n=Object(a.useReactiveVar)(b),r=Object(f.f)(),o=V(),s=R(),l=s.data,d=s.loading,u=E(),j=Object(T.a)(u,1)[0],p=c.a.useState(null),m=Object(T.a)(p,2),h=m[0],O=m[1],g=function(){O(null)};return Object(i.jsx)(c.a.Fragment,{children:Object(i.jsxs)(M.a,{className:o.toolbar,children:[Object(i.jsx)(S.a,{style:{marginRight:"36px"},size:"small",onClick:function(){r.push("/")},children:Object(i.jsx)("img",{alt:"home",width:"40px",height:"40px",src:"/meat-logo.png"})}),Object(i.jsx)(W.a,{component:"h2",variant:"h5",color:"inherit",align:"center",noWrap:!0,className:o.toolbarTitle,children:t}),Object(i.jsx)(S.a,{style:{width:"100px"},variant:"outlined",size:"small",onClick:function(e){O(e.currentTarget)},children:"Menu"}),Object(i.jsx)(B.a,{id:"simple-menu",anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:g,children:n?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(F.a,{onClick:function(){d&&g(),!d&&l&&(r.push("/my-profile"),g())},children:"Profile"}),Object(i.jsx)(F.a,{onClick:function(){r.push("/edit-account"),g()},children:"Edit account"}),Object(i.jsx)(F.a,{onClick:function(){j()},children:"Logout"})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(F.a,{onClick:function(){r.push("/login"),g()},children:"Login"}),Object(i.jsx)(F.a,{onClick:function(){r.push("/signup"),g()},children:"Sign Up"})]})})]})})},_=n(22),H=Object(y.a)((function(e){return{paper:{height:"100vh",paddingTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"}}})),Q=function(){var e=H();return Object(i.jsxs)(P.a,{component:"main",maxWidth:"xs",children:[Object(i.jsx)(_.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Not found"})}),Object(i.jsxs)("div",{className:e.paper,children:[Object(i.jsx)(W.a,{variant:"h2",children:"Oops!"}),Object(i.jsx)(N.a,{paddingTop:"24px",children:Object(i.jsx)(W.a,{variant:"h5",children:"Not Found"})}),Object(i.jsx)(N.a,{paddingTop:"10px",paddingBottom:"16px",children:"This is not the page you are looking for T^T"}),Object(i.jsxs)(N.a,{children:["Go back to"," ",Object(i.jsx)(N.a,{component:"span",color:"secondary",children:Object(i.jsx)(v.b,{to:"/",style:{color:"#4c8c4a"},children:"Home"})})]})]})]})},Z=n(245),K=n(8),Y=function(e){var t=e.errorMessage;return Object(i.jsx)(W.a,{variant:"caption",color:"error",children:t})},G=n(266),J=Object(y.a)((function(e){return{submit:{margin:e.spacing(3,0,2)}}})),X=function(e){var t=e.message,n=e.validate,a=e.loading,r=J();return Object(i.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:r.submit,disabled:n,children:a?Object(i.jsx)(Z.a,{size:24}):t})},ee=n(103),te=n.n(ee),ne=n(261),ie=n(32);function ae(){var e=Object(L.a)(["\n  mutation updateUser($input: UpdateUserDto!) {\n    updateUser(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return ae=function(){return e},e}var re=Object(a.gql)(ae()),ce=Object(y.a)((function(e){return{loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)},paper:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},deleteButton:{margin:e.spacing(5,0,2),backgroundColor:"#9a0007",color:"white","&.MuiButton-root:hover":{backgroundColor:"#650000"}}}})),oe=Object(K.a)({root:{"& label.Mui-focused":{color:"white"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(ne.a),se=function(){var e,t,n,o,s=Object(a.useReactiveVar)(b),l=ce(),d=R(),u=d.data,j=d.loading,p=Object(f.f)(),m=E(),h=Object(T.a)(m,1)[0],O=Object(r.useState)(!1),g=Object(T.a)(O,2),x=g[0],v=g[1];Object(r.useEffect)((function(){s||p.push("/")}),[p,s]);var y=Object(ie.a)({mode:"onChange"}),C=y.register,w=y.handleSubmit,N=y.getValues,k=y.errors,D=y.formState,I=Object(a.useMutation)(re,{onCompleted:function(e){e.updateUser.ok&&h()}}),M=Object(T.a)(I,2),B=M[0],F=M[1],L=F.data,z=F.loading;return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(_.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Edit Account"})}),Object(i.jsx)("main",{children:Object(i.jsx)(P.a,{maxWidth:"md",children:j?Object(i.jsx)(P.a,{className:l.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):Object(i.jsx)(P.a,{maxWidth:"xs",children:Object(i.jsxs)("div",{className:l.paper,children:[Object(i.jsx)(G.a,{className:l.avatar,children:Object(i.jsx)(te.a,{})}),Object(i.jsx)(W.a,{component:"h1",variant:"h5",children:"Let's edit your profile!"}),Object(i.jsxs)("form",{className:l.form,noValidate:!0,onSubmit:w((function(){var e=N(),t=e.username,n=e.email,i=e.password;i!==e.confirmPassword?v(!0):(v(!1),t&&""===n&&""===i&&B({variables:{input:{username:t}}}),""===t&&n&&""===i&&B({variables:{input:{email:n}}}),""===t&&""===n&&i&&B({variables:{input:{password:i}}}),t&&n&&""===i&&B({variables:{input:{username:t,email:n}}}),t&&""===n&&i&&B({variables:{input:{username:t,password:i}}}),""===t&&n&&i&&B({variables:{input:{email:n,password:i}}}),t&&n&&i&&B({variables:{input:{username:t,email:n,password:i}}}))})),children:[Object(i.jsx)(oe,{variant:"outlined",margin:"normal",fullWidth:!0,name:"username",label:"New username",type:"text",id:"username",inputRef:C({validate:{sameUsername:function(e){return e!==(null===u||void 0===u?void 0:u.me.username)}}})}),"sameUsername"===(null===(e=k.username)||void 0===e?void 0:e.type)&&Object(i.jsx)("div",{children:Object(i.jsx)(Y,{errorMessage:"Same username"})}),Object(i.jsx)(oe,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"New email",name:"email",autoComplete:"email",inputRef:C({pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/})}),"pattern"===(null===(t=k.email)||void 0===t?void 0:t.type)&&Object(i.jsx)("div",{children:Object(i.jsx)(Y,{errorMessage:"Check email pattern"})}),Object(i.jsx)(oe,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"New password",type:"password",id:"password",inputRef:C({minLength:8})}),"minLength"===(null===(n=k.password)||void 0===n?void 0:n.type)&&Object(i.jsx)("div",{children:Object(i.jsx)(Y,{errorMessage:"Password must be at least 8 chars"})}),Object(i.jsx)(oe,{variant:"outlined",margin:"normal",fullWidth:!0,name:"confirmPassword",label:"Confirm new password ",type:"password",id:"confirmPassword",inputRef:C({minLength:8})}),"minLength"===(null===(o=k.confirmPassword)||void 0===o?void 0:o.type)&&Object(i.jsx)("div",{children:Object(i.jsx)(Y,{errorMessage:"Password must be at least 8 chars"})}),x&&Object(i.jsx)(Y,{errorMessage:"Check password again"}),Object(i.jsx)(X,{message:"Update",validate:!D.isValid,loading:z}),(null===L||void 0===L?void 0:L.updateUser.error)&&Object(i.jsx)("div",{children:Object(i.jsx)(Y,{errorMessage:L.updateUser.error})})]}),Object(i.jsx)(S.a,{type:"button",fullWidth:!0,variant:"contained",className:l.deleteButton,onClick:function(){p.push("/delete-account"),window.scrollTo(0,0)},children:"Delete account"})]})})})})]})},le=n(247),de=n(250),ue=n(249),je=n(248),pe=n(246),be=n(73),me=n.n(be),he=n(265),Oe=n(254),ge=n(252),xe=n(253),ve=n(251),fe=n(64);function ye(){var e=Object(L.a)(["\n  mutation updateBidding($input: UpdateBiddingDto!) {\n    updateBidding(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return ye=function(){return e},e}function Pe(){var e=Object(L.a)(["\n  mutation createBidding($input: CreateBiddingDto!) {\n    createBidding(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return Pe=function(){return e},e}function Ce(){var e=Object(L.a)(["\n  query getWaitingProducts($input: GetAllProductsDto!) {\n    getWaitingProducts(input: $input) {\n      ok\n      error\n      maxPage\n      products {\n        id\n        productName\n        description\n        startPrice\n        remainingTime\n        picture {\n          url\n        }\n      }\n    }\n  }\n"]);return Ce=function(){return e},e}function we(){var e=Object(L.a)(["\n  query getInProgressProducts($input: GetAllProductsDto!) {\n    getInProgressProducts(input: $input) {\n      ok\n      error\n      maxPage\n      products {\n        id\n        productName\n        description\n        bidPrice\n        remainingTime\n        picture {\n          url\n        }\n      }\n    }\n  }\n"]);return we=function(){return e},e}var Ne=Object(a.gql)(we()),ke=Object(a.gql)(Ce()),De=Object(a.gql)(Pe()),Ie=Object(a.gql)(ye()),Te=Object(y.a)((function(e){return{progressButton:{paddingBottom:e.spacing(4)},card:{height:"100%",display:"flex",flexDirection:"column"},cardImage:{paddingTop:"56.25%"},cardContent:{flexGrow:1},page:{paddingTop:e.spacing(4)},pageNumber:{backgroundColor:e.palette.secondary.main,width:"40px",height:"40px",fontSize:"large",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px"},loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)},noContent:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:e.spacing(20)},uploadContainer:{display:"flex",justifyContent:"flex-end",marginTop:e.spacing(4)},uploadButton:{backgroundColor:me.a[900],color:"white",minWidth:"100px","&.MuiButton-root:hover":{backgroundColor:"#000051"}}}})),Me=function(){var e,t,n,o,s=Te(),l=Object(a.useReactiveVar)(b),d=Object(f.f)(),u=Object(r.useState)(!0),j=Object(T.a)(u,2),p=j[0],m=j[1],h=Object(r.useState)(1),O=Object(T.a)(h,2),g=O[0],x=O[1],v=Object(r.useState)(1),y=Object(T.a)(v,2),C=y[0],w=y[1],k=Object(a.useLazyQuery)(Ne,{variables:{input:{page:g}}}),D=Object(T.a)(k,2),I=D[0],M=D[1],B=M.data,F=M.loading,L=Object(a.useLazyQuery)(ke,{variables:{input:{page:C}}}),z=Object(T.a)(L,2),q=z[0],R=z[1],$=R.data,U=R.loading,E=Object(ie.a)(),V=E.register,A=E.handleSubmit,H=E.getValues,Q=Object(a.useMutation)(De,{onCompleted:function(e){e.createBidding.ok&&window.location.reload()}}),K=Object(T.a)(Q,2),Y=K[0],G=K[1],J=G.data,X=G.loading,ee=Object(a.useMutation)(Ie,{onCompleted:function(e){e.updateBidding.ok&&window.location.reload()}}),te=Object(T.a)(ee,2),ae=te[0],re=te[1],ce=re.data,oe=re.loading;Object(r.useEffect)((function(){I(),q()}),[I,q]);var se=Object(r.useState)(!1),be=Object(T.a)(se,2),me=be[0],ye=be[1],Pe=Object(r.useState)(null),Ce=Object(T.a)(Pe,2),we=Ce[0],Me=Ce[1],Se=Object(r.useState)(null),We=Object(T.a)(Se,2),Be=We[0],Fe=We[1],Le=Object(r.useState)(!0),ze=Object(T.a)(Le,2),qe=ze[0],Re=ze[1],$e=function(e,t,n){ye(!0),Me(e),Fe(t),Re(n)},Ue=function(){ye(!1)},Ee=function(e){var t=e.minutes,n=e.seconds;return e.completed?Object(i.jsx)("span",{style:{color:"#f44336",fontSize:"14px"},children:"Finished!"}):Object(i.jsxs)("span",{style:{color:"#ff7961",fontSize:"14px"},children:[t<10?"0".concat(t,"m"):"".concat(t,"m")," ",n<10?"0".concat(n,"s"):"".concat(n,"s")]})},Ve=Object(i.jsxs)("span",{children:["The Current price is"," ",Object(i.jsx)("span",{style:{fontWeight:"bold"},children:Be})," won. The bid price must be more than"," ",Object(i.jsx)("span",{style:{fontWeight:"bold"},children:Be})," won."]}),Ae=Object(i.jsxs)("span",{children:["If you are sure, Please type more than"," ",Object(i.jsx)("span",{style:{fontWeight:"bold"},children:Be})," to higher bid."]}),_e=Object(i.jsxs)("span",{children:["The starting price is"," ",Object(i.jsx)("span",{style:{fontWeight:"bold"},children:Be})," won. Are you sure?"]}),He=Object(i.jsxs)("span",{children:["If you are sure, Please type"," ",Object(i.jsx)("span",{style:{fontWeight:"bold"},children:Be})," to bid."]});return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(_.a,{children:Object(i.jsx)("title",{children:"Fresh Meat"})}),Object(i.jsxs)("main",{children:[Object(i.jsxs)("div",{className:s.progressButton,children:[Object(i.jsx)(P.a,{maxWidth:"sm",children:Object(i.jsxs)(pe.a,{container:!0,spacing:2,justify:"center",children:[Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(S.a,{variant:p?"contained":"outlined",color:"secondary",style:{minWidth:"130px"},onClick:function(){return m(!0)},children:"In Progress"})}),Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(S.a,{variant:p?"outlined":"contained",color:"secondary",style:{minWidth:"130px"},onClick:function(){return m(!1)},children:"Waiting"})})]})}),l&&Object(i.jsx)(P.a,{className:s.uploadContainer,children:Object(i.jsx)(S.a,{className:s.uploadButton,variant:"contained",onClick:function(){d.push("/product/new")},children:"Upload"})})]}),Object(i.jsx)(P.a,{maxWidth:"md",children:Object(i.jsxs)(pe.a,{container:!0,spacing:4,children:[!0===p?Object(i.jsxs)(i.Fragment,{children:[F?Object(i.jsx)(P.a,{className:s.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):0===(null===B||void 0===B||null===(e=B.getInProgressProducts.products)||void 0===e?void 0:e.length)?Object(i.jsxs)(P.a,{className:s.noContent,children:[Object(i.jsx)(W.a,{variant:"h3",children:"Oops!"}),Object(i.jsx)(W.a,{variant:"subtitle1",children:"There is no product in progress \ud83e\uddb4"})]}):null===B||void 0===B||null===(t=B.getInProgressProducts.products)||void 0===t?void 0:t.map((function(e){return Object(i.jsx)(pe.a,{item:!0,xs:12,sm:6,md:4,children:Object(i.jsxs)(le.a,{className:s.card,children:[Object(i.jsx)(je.a,{className:s.cardImage,image:e.picture?e.picture.url:"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg",title:"Image title"}),Object(i.jsxs)(ue.a,{className:s.cardContent,children:[Object(i.jsx)(W.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.productName}),Object(i.jsx)(fe.a,{date:e.remainingTime,renderer:Ee}),Object(i.jsxs)(W.a,{variant:"subtitle1",children:[e.bidPrice," \u20a9"]}),Object(i.jsx)(P.a,{style:{minHeight:"50px",maxHeight:"50px",padding:0},children:Object(i.jsx)(W.a,{variant:"subtitle2",children:e.description?e.description:"No description"})})]}),Object(i.jsxs)(de.a,{children:[Object(i.jsx)(S.a,{size:"small",color:"primary",onClick:function(){d.push("/product/".concat(e.id))},children:"View"}),l&&Object(i.jsx)(S.a,{size:"small",color:"primary",onClick:function(){$e(e.id,e.bidPrice?e.bidPrice:33,!0)},children:"Bidding"})]})]})},e.id)})),Object(i.jsx)(P.a,{children:Object(i.jsx)("div",{className:s.page,children:Object(i.jsx)(P.a,{maxWidth:"sm",children:Object(i.jsxs)(pe.a,{container:!0,spacing:2,justify:"center",children:[Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(S.a,{variant:"text",color:"secondary",onClick:function(){g>1&&(x(g-1),I(),window.scrollTo(0,0))},children:"\u25c0"})}),Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(N.a,{className:s.pageNumber,children:g})}),Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(S.a,{variant:"text",color:"secondary",onClick:function(){B&&null!==B.getInProgressProducts.maxPage&&g<B.getInProgressProducts.maxPage&&(x(g+1),I(),window.scrollTo(0,0))},children:"\u25b6"})})]})})})})]}):Object(i.jsxs)(i.Fragment,{children:[U?Object(i.jsx)(P.a,{className:s.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):0===(null===$||void 0===$||null===(n=$.getWaitingProducts.products)||void 0===n?void 0:n.length)?Object(i.jsxs)(P.a,{className:s.noContent,children:[Object(i.jsx)(W.a,{variant:"h3",children:"Oops!"}),Object(i.jsx)(W.a,{variant:"subtitle1",children:"There are no product waiting for auction \ud83e\uddb4"})]}):null===$||void 0===$||null===(o=$.getWaitingProducts.products)||void 0===o?void 0:o.map((function(e){return Object(i.jsx)(pe.a,{item:!0,xs:12,sm:6,md:4,children:Object(i.jsxs)(le.a,{className:s.card,children:[Object(i.jsx)(je.a,{className:s.cardImage,image:e.picture?e.picture.url:"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg",title:"Image title"}),Object(i.jsxs)(ue.a,{className:s.cardContent,children:[Object(i.jsx)(W.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.productName}),Object(i.jsxs)(W.a,{variant:"subtitle1",children:[e.startPrice," \u20a9"]}),Object(i.jsx)(P.a,{style:{minHeight:"50px",maxHeight:"50px",padding:0},children:Object(i.jsx)(W.a,{variant:"subtitle2",children:e.description?e.description:"No description"})})]}),Object(i.jsxs)(de.a,{children:[Object(i.jsx)(S.a,{size:"small",color:"primary",onClick:function(){d.push("/product/".concat(e.id))},children:"View"}),l&&Object(i.jsx)(S.a,{size:"small",color:"primary",onClick:function(){$e(e.id,e.startPrice,!1)},children:"Bidding"})]})]})},e.id)})),Object(i.jsx)(P.a,{children:Object(i.jsx)("div",{className:s.page,children:Object(i.jsx)(P.a,{maxWidth:"sm",children:Object(i.jsxs)(pe.a,{container:!0,spacing:2,justify:"center",children:[Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(S.a,{variant:"text",color:"secondary",onClick:function(){C>1&&(w(C-1),q(),window.scrollTo(0,0))},children:"\u25c0"})}),Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(N.a,{className:s.pageNumber,children:C})}),Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(S.a,{variant:"text",color:"secondary",onClick:function(){$&&null!==$.getWaitingProducts.maxPage&&C<$.getWaitingProducts.maxPage&&(w(C+1),q(),window.scrollTo(0,0))},children:"\u25b6"})})]})})})})]}),Object(i.jsxs)(he.a,{open:me,onClose:Ue,"aria-labelledby":"form-dialog-title",children:[Object(i.jsx)(ve.a,{id:"form-dialog-title",children:!0===qe?"Higher bid on a product":"Bid on a product"}),Object(i.jsxs)(ge.a,{children:[Object(i.jsx)(xe.a,{children:!0===qe?Ve:_e}),Object(i.jsx)(xe.a,{children:!0===qe?Ae:He}),(null===J||void 0===J?void 0:J.createBidding.error)&&Object(i.jsx)(xe.a,{color:"error",children:J.createBidding.error}),(null===ce||void 0===ce?void 0:ce.updateBidding.error)&&Object(i.jsx)(xe.a,{color:"error",children:ce.updateBidding.error}),Object(i.jsxs)("form",{onSubmit:A((function(){var e=H().bidPrice;we&&(qe&&ae({variables:{input:{productId:we,bidPrice:+e}}}),qe||Y({variables:{input:{productId:we,startPrice:+e}}}))})),children:[Object(i.jsx)(ne.a,{autoFocus:!0,margin:"dense",id:"bidPrice",label:!0===qe?"Current price: ".concat(Be):"Starting price: ".concat(Be),type:"text",fullWidth:!0,name:"bidPrice",inputRef:V}),Object(i.jsx)(S.a,{onClick:Ue,color:"primary",children:"Cancel"}),Object(i.jsx)(S.a,{color:"primary",type:"submit",children:X||oe?Object(i.jsx)(Z.a,{size:24}):"Bidding"})]})]}),Object(i.jsx)(Oe.a,{})]})]})})]})]})},Se=n(145),We=n.n(Se);function Be(){var e=Object(L.a)(["\n  mutation deleteUser($input: DeleteUserDto!) {\n    deleteUser(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return Be=function(){return e},e}var Fe=Object(a.gql)(Be()),Le=Object(y.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},deleteButton:{margin:e.spacing(7,0,2),backgroundColor:"#9a0007",color:"white","&.MuiButton-root:hover":{backgroundColor:"#650000"}}}})),ze=Object(K.a)({root:{"& label.Mui-focused":{color:"white"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(ne.a),qe=function(){var e,t=Object(a.useReactiveVar)(b),n=Object(f.f)(),o=Le(),s=E(),l=Object(T.a)(s,1)[0],d=Object(ie.a)({mode:"onChange"}),u=d.register,j=d.handleSubmit,p=d.getValues,m=d.formState,h=d.errors;Object(r.useEffect)((function(){t||n.push("/")}),[n,t]);var O=function(){var e=p().password;v({variables:{input:{password:e}}})},g=Object(a.useMutation)(Fe,{onCompleted:function(e){e.deleteUser.ok&&l()}}),x=Object(T.a)(g,2),v=x[0],y=x[1],C=y.data,w=y.loading;return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(_.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Delete Account"})}),Object(i.jsx)("main",{children:Object(i.jsx)(P.a,{maxWidth:"xs",children:Object(i.jsxs)("div",{className:o.paper,children:[Object(i.jsx)(G.a,{className:o.avatar,children:Object(i.jsx)(We.a,{})}),Object(i.jsx)(W.a,{component:"h1",variant:"h5",children:"It was nice to meet you!"}),Object(i.jsxs)("form",{className:o.form,noValidate:!0,onSubmit:j(O),children:[Object(i.jsx)(ze,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",inputRef:u({minLength:8})}),"minLength"===(null===(e=h.password)||void 0===e?void 0:e.type)&&Object(i.jsx)("div",{children:Object(i.jsx)(Y,{errorMessage:"Password must be at least 8 chars"})}),Object(i.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",className:o.deleteButton,disabled:!m.isValid,onClick:O,children:w?Object(i.jsx)(Z.a,{size:24}):"Delete account"}),(null===C||void 0===C?void 0:C.deleteUser.error)&&Object(i.jsx)("div",{children:Object(i.jsx)(Y,{errorMessage:C.deleteUser.error})})]})]})})})]})};function Re(){var e=Object(L.a)(["\n  query userDetail($input: UserDetailDto!) {\n    userDetail(input: $input) {\n      ok\n      error\n      user {\n        id\n        username\n      }\n      inProgress {\n        id\n        productName\n        bidPrice\n        remainingTime\n      }\n      waiting {\n        id\n        productName\n        startPrice\n      }\n    }\n  }\n"]);return Re=function(){return e},e}var $e=Object(a.gql)(Re()),Ue=Object(y.a)((function(e){return{loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)},productLoading:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:e.spacing(20)},mainContent:{display:"flex",flexDirection:"column",justifyContent:"center"},subtitle:{paddingTop:e.spacing(6),paddingBottom:e.spacing(2)},productList:{padding:0,minHeight:e.spacing(20)},productItems:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:0},waitingItems:{display:"flex",padding:0},inProgressItems:{display:"flex",padding:0},productTitle:{marginRight:"4px",textDecoration:"none",cursor:"pointer","&:hover":{textDecoration:"underline"}},countdown:{minWidth:e.spacing(8),display:"flex",justifyContent:"flex-end",alignItems:"center"},noProduct:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:e.spacing(20)}}})),Ee=function(){var e,t,n=Object(f.g)().id,o=Ue(),s=Object(f.f)(),l=Object(a.useLazyQuery)($e,{variables:{input:{userId:+n}}}),d=Object(T.a)(l,2),u=d[0],j=d[1],p=j.data,b=j.loading;Object(r.useEffect)((function(){n||s.push("/"),u()}),[u,s,n]);var m=function(e){var t=e.minutes,n=e.seconds;return e.completed?Object(i.jsx)("span",{style:{color:"#f44336",fontSize:"14px"},children:"Finished!"}):Object(i.jsxs)("span",{style:{color:"#ff7961",fontSize:"14px"},children:[t<10?"0".concat(t,"m"):"".concat(t,"m")," ",n<10?"0".concat(n,"s"):"".concat(n,"s")]})};return(null===p||void 0===p?void 0:p.userDetail.ok)?Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(_.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - ".concat(null===p||void 0===p||null===(e=p.userDetail.user)||void 0===e?void 0:e.username)})}),Object(i.jsx)("main",{children:Object(i.jsx)(P.a,{maxWidth:"md",children:b&&!p?Object(i.jsx)(P.a,{className:o.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):Object(i.jsxs)(P.a,{maxWidth:"xs",className:o.mainContent,children:[Object(i.jsx)(W.a,{variant:"h4",children:"".concat(null===p||void 0===p||null===(t=p.userDetail.user)||void 0===t?void 0:t.username,"'s products")}),Object(i.jsx)(W.a,{variant:"h5",className:o.subtitle,children:"In progress"}),Object(i.jsx)(P.a,{className:o.productList,children:!b&&(null===p||void 0===p?void 0:p.userDetail.inProgress)?0===p.userDetail.inProgress.length?Object(i.jsx)(P.a,{className:o.noProduct,children:Object(i.jsx)(W.a,{variant:"overline",children:"There is no product in progress \ud83e\uddb4"})}):p.userDetail.inProgress.map((function(e){return Object(i.jsxs)(P.a,{className:o.productItems,children:[Object(i.jsxs)(P.a,{className:o.inProgressItems,children:[Object(i.jsx)(W.a,{variant:"subtitle1",onClick:function(){s.push("/product/".concat(e.id))},className:o.productTitle,children:e.productName}),Object(i.jsxs)(W.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]})]}),Object(i.jsx)(W.a,{variant:"subtitle1",className:o.countdown,children:Object(i.jsx)(fe.a,{date:e.remainingTime,renderer:m})})]})})):Object(i.jsx)(P.a,{className:o.productLoading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})})}),Object(i.jsx)(W.a,{variant:"h5",className:o.subtitle,children:"Waiting for auction"}),Object(i.jsx)(P.a,{className:o.productList,children:!b&&(null===p||void 0===p?void 0:p.userDetail.waiting)?0===p.userDetail.waiting.length?Object(i.jsx)(P.a,{className:o.noProduct,children:Object(i.jsx)(W.a,{variant:"overline",children:"There is no product waiting for auction \ud83e\uddb4"})}):p.userDetail.waiting.map((function(e){return Object(i.jsxs)(P.a,{className:o.waitingItems,children:[Object(i.jsx)(W.a,{variant:"subtitle1",onClick:function(){s.push("/product/".concat(e.id))},className:o.productTitle,children:e.productName}),Object(i.jsxs)(W.a,{variant:"subtitle1",children:["\u2219 ",e.startPrice,"\u20a9"]})]})})):Object(i.jsx)(P.a,{className:o.productLoading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})})})]})})})]}):Object(i.jsx)(Q,{})};function Ve(){var e=Object(L.a)(["\n  query myProfile {\n    myProfile {\n      ok\n      error\n      uploadedProduct {\n        id\n        productName\n        bidPrice\n        progress\n      }\n      inProgressProduct {\n        id\n        productName\n        bidPrice\n        remainingTime\n      }\n      closedProduct {\n        id\n        productName\n        bidPrice\n      }\n      paidProduct {\n        id\n        productName\n        bidPrice\n      }\n      completedProduct {\n        id\n        productName\n        bidPrice\n      }\n    }\n  }\n"]);return Ve=function(){return e},e}var Ae,_e=Object(a.gql)(Ve()),He=Object(y.a)((function(e){return{loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)},buttonContainer:{paddingTop:e.spacing(4)},mainContent:{display:"flex",flexDirection:"column",justifyContent:"center"},subtitle:{paddingTop:e.spacing(6),paddingBottom:e.spacing(2)},productList:{padding:0,minHeight:e.spacing(20)},noProduct:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:e.spacing(20)},productItems:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:0},waitingItems:{display:"flex",padding:0},inProgressItems:{display:"flex",padding:0},productTitle:{marginRight:"4px",textDecoration:"none",cursor:"pointer","&:hover":{textDecoration:"underline"}},productProgress:{marginLeft:"4px"},countdown:{minWidth:e.spacing(8),display:"flex",justifyContent:"flex-end",alignItems:"center"}}})),Qe=function(){var e=Object(a.useReactiveVar)(b),t=He(),n=Object(f.f)(),o=Object(r.useState)(!0),s=Object(T.a)(o,2),l=s[0],d=s[1],u=R().data,j=Object(a.useLazyQuery)($e),p=Object(T.a)(j,2),m=p[0],h=p[1],O=h.data,g=h.loading,x=Object(a.useLazyQuery)(_e),v=Object(T.a)(x,2),y=v[0],C=v[1],w=C.data,N=C.loading;Object(r.useEffect)((function(){e||n.push("/"),u||n.push("/"),u&&(m({variables:{input:{userId:u.me.id}}}),y())}),[u,n,m,y,e]);var k=function(e){var t=e.minutes,n=e.seconds;return e.completed?Object(i.jsx)("span",{style:{color:"#f44336",fontSize:"14px"},children:"Finished!"}):Object(i.jsxs)("span",{style:{color:"#ff7961",fontSize:"14px"},children:[t<10?"0".concat(t,"m"):"".concat(t,"m")," ",n<10?"0".concat(n,"s"):"".concat(n,"s")]})};return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(_.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - ".concat(null===u||void 0===u?void 0:u.me.username)})}),Object(i.jsx)("main",{children:Object(i.jsx)(P.a,{maxWidth:"md",children:g||N?Object(i.jsx)(P.a,{className:t.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):Object(i.jsxs)(P.a,{maxWidth:"xs",className:t.mainContent,children:[Object(i.jsx)(W.a,{variant:"h4",children:"".concat(null===u||void 0===u?void 0:u.me.username,"'s products")}),Object(i.jsxs)(pe.a,{container:!0,spacing:2,justify:"center",className:t.buttonContainer,children:[Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(S.a,{variant:l?"contained":"outlined",color:"secondary",style:{minWidth:"130px"},onClick:function(){return d(!0)},children:"Uploaded"})}),Object(i.jsx)(pe.a,{item:!0,children:Object(i.jsx)(S.a,{variant:l?"outlined":"contained",color:"secondary",style:{minWidth:"130px"},onClick:function(){return d(!1)},children:"Bidded"})})]}),!0===l&&(null===O||void 0===O?void 0:O.userDetail.inProgress)&&O.userDetail.waiting&&(null===w||void 0===w?void 0:w.myProfile.uploadedProduct)?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(W.a,{variant:"h5",className:t.subtitle,children:"In progress"}),Object(i.jsx)(P.a,{className:t.productList,children:0===O.userDetail.inProgress.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(W.a,{variant:"overline",children:"There is no product in progress \ud83e\uddb4"})}):O.userDetail.inProgress.map((function(e){return Object(i.jsxs)(P.a,{className:t.productItems,children:[Object(i.jsxs)(P.a,{className:t.inProgressItems,children:[Object(i.jsx)(W.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(W.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]})]}),Object(i.jsx)(W.a,{variant:"subtitle1",className:t.countdown,children:Object(i.jsx)(fe.a,{date:e.remainingTime,renderer:k})})]})}))}),Object(i.jsx)(W.a,{variant:"h5",className:t.subtitle,children:"Waiting for auction"}),Object(i.jsx)(P.a,{className:t.productList,children:0===O.userDetail.waiting.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(W.a,{variant:"overline",children:"There is no product waiting for auction \ud83e\uddb4"})}):O.userDetail.waiting.map((function(e){return Object(i.jsxs)(P.a,{className:t.waitingItems,children:[Object(i.jsx)(W.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(W.a,{variant:"subtitle1",children:["\u2219 ",e.startPrice,"\u20a9"]})]})}))}),Object(i.jsx)(W.a,{variant:"h5",className:t.subtitle,children:"Finished"}),Object(i.jsx)(P.a,{className:t.productList,children:0===w.myProfile.uploadedProduct.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(W.a,{variant:"overline",children:"There is no product finished \ud83e\uddb4"})}):w.myProfile.uploadedProduct.map((function(e){return Object(i.jsxs)(P.a,{className:t.waitingItems,children:[Object(i.jsx)(W.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(W.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]}),Object(i.jsxs)(W.a,{variant:"subtitle1",className:t.productProgress,children:["\u2219 ",e.progress]})]})}))})]}):Object(i.jsx)(i.Fragment,{}),!1===l&&(null===w||void 0===w?void 0:w.myProfile.inProgressProduct)&&w.myProfile.closedProduct&&w.myProfile.paidProduct&&w.myProfile.completedProduct?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(W.a,{variant:"h5",className:t.subtitle,children:"InProgress"}),Object(i.jsx)(P.a,{className:t.productList,children:0===w.myProfile.inProgressProduct.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(W.a,{variant:"overline",children:"There is no product in progress \ud83e\uddb4"})}):w.myProfile.inProgressProduct.map((function(e){return Object(i.jsxs)(P.a,{className:t.productItems,children:[Object(i.jsxs)(P.a,{className:t.inProgressItems,children:[Object(i.jsx)(W.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(W.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]})]}),Object(i.jsx)(W.a,{variant:"subtitle1",className:t.countdown,children:Object(i.jsx)(fe.a,{date:e.remainingTime,renderer:k})})]})}))}),Object(i.jsx)(W.a,{variant:"h5",className:t.subtitle,children:"Closed"}),Object(i.jsx)(P.a,{className:t.productList,children:0===w.myProfile.closedProduct.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(W.a,{variant:"overline",children:"There is no product closed \ud83e\uddb4"})}):w.myProfile.closedProduct.map((function(e){return Object(i.jsxs)(P.a,{className:t.waitingItems,children:[Object(i.jsx)(W.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(W.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]})]})}))}),Object(i.jsx)(W.a,{variant:"h5",className:t.subtitle,children:"Paid"}),Object(i.jsx)(P.a,{className:t.productList,children:0===w.myProfile.paidProduct.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(W.a,{variant:"overline",children:"There is no product waiting for payment \ud83e\uddb4"})}):w.myProfile.paidProduct.map((function(e){return Object(i.jsxs)(P.a,{className:t.waitingItems,children:[Object(i.jsx)(W.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(W.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]})]})}))}),Object(i.jsx)(W.a,{variant:"h5",className:t.subtitle,children:"Completed"}),Object(i.jsx)(P.a,{className:t.productList,children:0===w.myProfile.completedProduct.length?Object(i.jsx)(P.a,{className:t.noProduct,children:Object(i.jsx)(W.a,{variant:"overline",children:"There is no product completed \ud83e\uddb4"})}):w.myProfile.completedProduct.map((function(e){return Object(i.jsxs)(P.a,{className:t.waitingItems,children:[Object(i.jsx)(W.a,{variant:"subtitle1",onClick:function(){n.push("/product/".concat(e.id)),window.scrollTo(0,0)},className:t.productTitle,children:e.productName}),Object(i.jsxs)(W.a,{variant:"subtitle1",children:["\u2219 ",e.bidPrice,"\u20a9"]})]})}))})]}):Object(i.jsx)(i.Fragment,{})]})})})]})},Ze=n(41),Ke=n(268),Ye=n(255),Ge=n(264),Je=n(243),Xe=n(194),et=n(256);function tt(){var e=Object(L.a)(["\n  mutation deleteProduct($input: DeleteProductDto!) {\n    deleteProduct(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return tt=function(){return e},e}function nt(){var e=Object(L.a)(["\n  mutation editProgress($input: EditProgressDto!) {\n    editProgress(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return nt=function(){return e},e}function it(){var e=Object(L.a)(["\n  query productDetail($input: ProductDetailDto!) {\n    productDetail(input: $input) {\n      ok\n      error\n      product {\n        id\n        productName\n        startPrice\n        bidPrice\n        description\n        picture {\n          key\n          fileName\n        }\n        seller {\n          id\n          username\n        }\n        bidder {\n          id\n          username\n        }\n        progress\n      }\n    }\n  }\n"]);return it=function(){return e},e}!function(e){e.Closed="Closed",e.Completed="Completed",e.InProgress="InProgress",e.Paid="Paid",e.Waiting="Waiting"}(Ae||(Ae={}));var at=Object(a.gql)(it()),rt=Object(a.gql)(nt()),ct=Object(a.gql)(tt()),ot=Object(y.a)((function(e){return{loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)},stepper:{padding:e.spacing(3,0,8),backgroundColor:e.palette.primary.main},layout:Object(Ze.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),paper:Object(Ze.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),listItem:{padding:e.spacing(1,0)},textLink:{textDecoration:"none",color:e.palette.text.secondary,"&:hover":{textDecoration:"underline"}},buttonContainer:{padding:0,paddingTop:e.spacing(2),paddingBottom:e.spacing(6),display:"flex",justifyContent:"flex-end"},button:{backgroundColor:e.palette.secondary.main,color:"white",minWidth:"180px","&.MuiButton-root:hover":{backgroundColor:e.palette.secondary.dark}},deleteButton:{backgroundColor:"#9a0007",color:"white",minWidth:"180px","&.MuiButton-root:hover":{backgroundColor:"#650000"}},editButton:{marginRight:e.spacing(2),backgroundColor:e.palette.secondary.main,color:"white",minWidth:"180px","&.MuiButton-root:hover":{backgroundColor:e.palette.secondary.dark}}}})),st=function(){var e,t,n,o,s,l,d,u,j,p,m,h,O,g,x,y,C,w,N,k,D,I,M=Object(f.g)().id,B=Object(a.useReactiveVar)(b),F=ot(),L=Object(f.f)(),z=c.a.useState(0),q=Object(T.a)(z,2),$=q[0],U=q[1],E=c.a.useState(!1),V=Object(T.a)(E,2),A=V[0],H=V[1],K=R().data,G=Object(a.useLazyQuery)(at,{variables:{input:{productId:+M}}}),J=Object(T.a)(G,2),X=J[0],ee=J[1],te=ee.data,ne=ee.loading,ie=Object(a.useMutation)(rt,{onCompleted:function(e){e.editProgress.ok&&(fe(),window.location.reload(),window.scrollTo(0,0))}}),ae=Object(T.a)(ie,2),re=ae[0],ce=ae[1],oe=ce.data,se=ce.loading,le=Object(a.useMutation)(ct,{onCompleted:function(e){e.deleteProduct.ok&&(fe(),L.push("/"),window.location.reload(),window.scrollTo(0,0))}}),de=Object(T.a)(le,2),ue=de[0],je=de[1],pe=je.data,be=je.loading,me=function(){H(!0)},fe=function(){H(!1)};return Object(r.useEffect)((function(){var e,t,n,i,a;M||L.push("/"),M&&X({variables:{input:{productId:+M}}}),(null===te||void 0===te||null===(e=te.productDetail.product)||void 0===e?void 0:e.progress)===Ae.Waiting&&U(0),(null===te||void 0===te||null===(t=te.productDetail.product)||void 0===t?void 0:t.progress)===Ae.InProgress&&U(1),(null===te||void 0===te||null===(n=te.productDetail.product)||void 0===n?void 0:n.progress)===Ae.Closed&&U(2),(null===te||void 0===te||null===(i=te.productDetail.product)||void 0===i?void 0:i.progress)===Ae.Paid&&U(3),(null===te||void 0===te||null===(a=te.productDetail.product)||void 0===a?void 0:a.progress)===Ae.Completed&&U(4)}),[L,M,K,null===te||void 0===te||null===(e=te.productDetail.product)||void 0===e?void 0:e.progress,X]),(null===te||void 0===te?void 0:te.productDetail.ok)?Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(_.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - ".concat(null===te||void 0===te||null===(t=te.productDetail.product)||void 0===t?void 0:t.productName)})}),Object(i.jsx)("main",{className:F.layout,children:Object(i.jsx)(P.a,{maxWidth:"md",children:ne&&(null===te||void 0===te?void 0:te.productDetail.product)?Object(i.jsx)(P.a,{className:F.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):Object(i.jsxs)("div",{children:[Object(i.jsx)(W.a,{variant:"h5",children:"Progress status"}),Object(i.jsx)(Ke.a,{activeStep:$,className:F.stepper,alternativeLabel:!0,children:["Waiting","In progress","Closed","Paid","Completed"].map((function(e){return Object(i.jsx)(Ye.a,{children:Object(i.jsx)(Ge.a,{children:Object(i.jsx)(W.a,{variant:"overline",children:e})})},e)}))}),Object(i.jsx)(W.a,{variant:"h5",gutterBottom:!0,children:"Product detail"}),Object(i.jsxs)(Je.a,{disablePadding:!0,children:[Object(i.jsx)(Xe.a,{className:F.listItem,children:Object(i.jsx)(et.a,{primary:"Product name",secondary:null===te||void 0===te||null===(o=te.productDetail.product)||void 0===o?void 0:o.productName})},null===te||void 0===te||null===(n=te.productDetail.product)||void 0===n?void 0:n.productName),Object(i.jsx)(Xe.a,{className:F.listItem,children:Object(i.jsx)(et.a,{primary:"Starting price",secondary:"".concat(null===te||void 0===te||null===(l=te.productDetail.product)||void 0===l?void 0:l.startPrice,"\u20a9")})},null===te||void 0===te||null===(s=te.productDetail.product)||void 0===s?void 0:s.startPrice),(null===te||void 0===te||null===(d=te.productDetail.product)||void 0===d?void 0:d.bidder)&&Object(i.jsx)(Xe.a,{className:F.listItem,children:Object(i.jsx)(et.a,{primary:"Current price",secondary:"".concat(null===te||void 0===te||null===(j=te.productDetail.product)||void 0===j?void 0:j.bidPrice,"\u20a9")})},null===te||void 0===te||null===(u=te.productDetail.product)||void 0===u?void 0:u.bidPrice),Object(i.jsx)(Xe.a,{className:F.listItem,children:Object(i.jsx)(et.a,{primary:"Seller",secondary:Object(i.jsx)(W.a,{variant:"body2",children:Object(i.jsx)(v.b,{to:"/user/".concat(null===te||void 0===te||null===(m=te.productDetail.product)||void 0===m?void 0:m.seller.id),className:F.textLink,children:null===te||void 0===te||null===(h=te.productDetail.product)||void 0===h?void 0:h.seller.username})})})},null===te||void 0===te||null===(p=te.productDetail.product)||void 0===p?void 0:p.seller.username),(null===te||void 0===te||null===(O=te.productDetail.product)||void 0===O?void 0:O.bidder)&&Object(i.jsx)(Xe.a,{className:F.listItem,children:Object(i.jsx)(et.a,{primary:"Buyer",secondary:Object(i.jsx)(W.a,{variant:"body2",children:Object(i.jsx)(v.b,{to:"/user/".concat(te.productDetail.product.bidder.id),className:F.textLink,children:te.productDetail.product.bidder.username})})})},null===te||void 0===te||null===(g=te.productDetail.product)||void 0===g?void 0:g.bidder.username)]}),B&&Object(i.jsxs)(P.a,{className:F.buttonContainer,children:[(null===te||void 0===te||null===(x=te.productDetail.product)||void 0===x?void 0:x.bidder)&&(null===K||void 0===K?void 0:K.me.id)===te.productDetail.product.bidder.id&&te.productDetail.product.progress===Ae.Closed&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(S.a,{className:F.button,onClick:me,children:"Request confirm"}),Object(i.jsxs)(he.a,{open:A,onClose:fe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(i.jsx)(ve.a,{id:"alert-dialog-title",children:"Request confirm"}),Object(i.jsxs)(ge.a,{children:[Object(i.jsx)(xe.a,{id:"alert-dialog-description",children:"Have you paid and would you like to ask for confirmation?"}),(null===oe||void 0===oe?void 0:oe.editProgress.error)&&Object(i.jsx)(Y,{errorMessage:oe.editProgress.error})]}),Object(i.jsxs)(Oe.a,{children:[Object(i.jsx)(S.a,{onClick:fe,color:"primary",children:"No"}),Object(i.jsx)(S.a,{onClick:function(){te.productDetail.product&&re({variables:{input:{productId:te.productDetail.product.id}}})},color:"primary",autoFocus:!0,children:se?Object(i.jsx)(Z.a,{size:14}):"Yes"})]})]})]}),(null===K||void 0===K?void 0:K.me.id)===(null===te||void 0===te||null===(y=te.productDetail.product)||void 0===y?void 0:y.seller.id)&&(null===te||void 0===te||null===(C=te.productDetail.product)||void 0===C?void 0:C.progress)===Ae.Paid&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(S.a,{className:F.button,onClick:me,children:"Confirm payment"}),Object(i.jsxs)(he.a,{open:A,onClose:fe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(i.jsx)(ve.a,{id:"alert-dialog-title",children:"Confirm payment"}),Object(i.jsxs)(ge.a,{children:[Object(i.jsx)(xe.a,{id:"alert-dialog-description",children:"Have you received payment and want to complete the transaction?"}),(null===oe||void 0===oe?void 0:oe.editProgress.error)&&Object(i.jsx)(Y,{errorMessage:oe.editProgress.error})]}),Object(i.jsxs)(Oe.a,{children:[Object(i.jsx)(S.a,{onClick:fe,color:"primary",children:"Cancel"}),Object(i.jsx)(S.a,{onClick:function(){te.productDetail.product&&re({variables:{input:{productId:te.productDetail.product.id}}})},color:"primary",autoFocus:!0,children:se?Object(i.jsx)(Z.a,{size:14}):"Yes"})]})]})]}),(null===K||void 0===K?void 0:K.me.id)===(null===te||void 0===te||null===(w=te.productDetail.product)||void 0===w?void 0:w.seller.id)&&(null===te||void 0===te||null===(N=te.productDetail.product)||void 0===N?void 0:N.progress)===Ae.Waiting&&Object(i.jsx)(S.a,{className:F.editButton,onClick:function(){var e;L.push("/edit-product/".concat(null===(e=te.productDetail.product)||void 0===e?void 0:e.id)),window.scrollTo(0,0)},children:"Edit product"}),(null===K||void 0===K?void 0:K.me.id)===(null===te||void 0===te||null===(k=te.productDetail.product)||void 0===k?void 0:k.seller.id)&&((null===te||void 0===te||null===(D=te.productDetail.product)||void 0===D?void 0:D.progress)===Ae.Waiting||(null===te||void 0===te||null===(I=te.productDetail.product)||void 0===I?void 0:I.progress)===Ae.Completed)&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(S.a,{className:F.deleteButton,onClick:me,children:"Delete product"}),Object(i.jsxs)(he.a,{open:A,onClose:fe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(i.jsx)(ve.a,{id:"alert-dialog-title",children:"Delete product"}),Object(i.jsxs)(ge.a,{children:[Object(i.jsx)(xe.a,{id:"alert-dialog-description",children:"Are you sure you want to delete the product?"}),(null===pe||void 0===pe?void 0:pe.deleteProduct.error)&&Object(i.jsx)(Y,{errorMessage:pe.deleteProduct.error})]}),Object(i.jsxs)(Oe.a,{children:[Object(i.jsx)(S.a,{onClick:fe,color:"primary",children:"Cancel"}),Object(i.jsx)(S.a,{onClick:function(){te.productDetail.product&&ue({variables:{input:{productId:te.productDetail.product.id}}})},color:"primary",autoFocus:!0,children:be?Object(i.jsx)(Z.a,{size:14}):"Yes"})]})]})]})]})]})})})]}):Object(i.jsx)(Q,{})},lt=n(104),dt=n.n(lt);function ut(){var e=Object(L.a)(["\n  mutation login($input: LoginDto!) {\n    login(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return ut=function(){return e},e}var jt=Object(a.gql)(ut()),pt=Object(K.a)({root:{"& label.Mui-focused":{color:"white"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(ne.a),bt=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)}}})),mt=function(){var e,t,n=bt(),r=Object(f.f)(),c=Object(ie.a)({mode:"onChange"}),o=c.register,s=c.handleSubmit,l=c.getValues,d=c.errors,u=c.formState,j=Object(a.useMutation)(jt,{onCompleted:function(e){e.login.ok&&(b(!0),r.push("/"),window.location.reload())}}),p=Object(T.a)(j,2),m=p[0],h=p[1],O=h.data,g=h.loading;return Object(i.jsxs)(P.a,{component:"main",maxWidth:"xs",children:[Object(i.jsx)(_.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Login"})}),Object(i.jsxs)("div",{className:n.paper,children:[Object(i.jsx)(G.a,{className:n.avatar,children:Object(i.jsx)(dt.a,{})}),Object(i.jsx)(W.a,{component:"h1",variant:"h5",children:"Welcome back!"}),Object(i.jsxs)("form",{className:n.form,noValidate:!0,onSubmit:s((function(){var e=l(),t=e.email,n=e.password;m({variables:{input:{email:t,password:n}}})})),children:[Object(i.jsx)(pt,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",autoFocus:!0,inputRef:o({required:!0,pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/})}),"pattern"===(null===(e=d.email)||void 0===e?void 0:e.type)&&Object(i.jsx)(Y,{errorMessage:"Check email pattern"}),Object(i.jsx)(pt,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:o({required:!0,minLength:8})}),"minLength"===(null===(t=d.password)||void 0===t?void 0:t.type)&&Object(i.jsx)(Y,{errorMessage:"Password must be at least 8 chars"}),Object(i.jsx)(X,{message:"Login",validate:!u.isValid,loading:g}),(null===O||void 0===O?void 0:O.login.error)&&Object(i.jsx)(Y,{errorMessage:O.login.error}),Object(i.jsx)(pe.a,{container:!0,children:Object(i.jsxs)(pe.a,{item:!0,children:["Don't have an account?"," ",Object(i.jsx)(C.a,{href:"/signup",variant:"body2",color:"secondary",children:"Sign Up"})]})})]})]})]})};function ht(){var e=Object(L.a)(["\n  mutation createUser($input: CreateUserDto!) {\n    createUser(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return ht=function(){return e},e}var Ot=Object(a.gql)(ht()),gt=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)}}})),xt=Object(K.a)({root:{"& label.Mui-focused":{color:"white"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(ne.a),vt=function(){var e,t,n=gt(),r=Object(f.f)(),c=Object(ie.a)({mode:"onChange"}),o=c.register,s=c.handleSubmit,l=c.getValues,d=c.errors,u=c.formState,j=Object(a.useMutation)(Ot,{onCompleted:function(e){e.createUser.ok&&r.push("/")}}),p=Object(T.a)(j,2),b=p[0],m=p[1],h=m.data,O=m.loading;return Object(i.jsxs)(P.a,{component:"main",maxWidth:"xs",children:[Object(i.jsx)(_.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Signup"})}),Object(i.jsxs)("div",{className:n.paper,children:[Object(i.jsx)(G.a,{className:n.avatar,children:Object(i.jsx)(dt.a,{})}),Object(i.jsx)(W.a,{component:"h1",variant:"h5",children:"Welcome!"}),Object(i.jsxs)("form",{className:n.form,noValidate:!0,onSubmit:s((function(){var e=l(),t=e.username,n=e.email,i=e.password;b({variables:{input:{username:t,email:n,password:i}}})})),children:[Object(i.jsx)(xt,{margin:"normal",autoComplete:"fname",name:"username",variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"User Name",autoFocus:!0,inputRef:o({required:!0})}),Object(i.jsx)(xt,{margin:"normal",variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",inputRef:o({required:!0,pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/})}),"pattern"===(null===(e=d.email)||void 0===e?void 0:e.type)&&Object(i.jsx)(Y,{errorMessage:"Check email pattern"}),Object(i.jsx)(xt,{margin:"normal",variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:o({required:!0,minLength:8})}),"minLength"===(null===(t=d.password)||void 0===t?void 0:t.type)&&Object(i.jsx)(Y,{errorMessage:"Password must be at least 8 chars"}),Object(i.jsx)(X,{message:"Sign Up",validate:!u.isValid,loading:O}),(null===h||void 0===h?void 0:h.createUser.error)&&Object(i.jsx)(Y,{errorMessage:h.createUser.error}),Object(i.jsx)(pe.a,{container:!0,children:Object(i.jsxs)(pe.a,{item:!0,children:["Already have an account?"," ",Object(i.jsx)(C.a,{href:"/login",variant:"body2",color:"secondary",children:"Log in"})]})})]})]})]})},ft=n(257),yt=n(146),Pt=n.n(yt);function Ct(){var e=Object(L.a)(["\n  mutation uploadImage($productId: Float!, $file: Upload!) {\n    uploadImage(productId: $productId, file: $file) {\n      ok\n      error\n    }\n  }\n"]);return Ct=function(){return e},e}function wt(){var e=Object(L.a)(["\n  mutation uploadProduct($input: UploadProductDto!) {\n    uploadProduct(input: $input) {\n      ok\n      error\n      productId\n    }\n  }\n"]);return wt=function(){return e},e}var Nt=Object(a.gql)(wt()),kt=Object(a.gql)(Ct()),Dt=Object(y.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},buttonContainer:{margin:e.spacing(2,0,6),padding:0},button:{backgroundColor:me.a[900],color:"white","&.MuiButton-root:hover":{backgroundColor:"#000051"}},fileList:{padding:e.spacing(2,0),display:"flex",justifyContent:"space-between",alignItems:"center"},deleteButton:{padding:e.spacing(.4,1.2),backgroundColor:"#9a0007",color:"white","&.MuiButton-root:hover":{backgroundColor:"#650000"}},loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)}}})),It=Object(K.a)({root:{"& label.Mui-focused":{color:"white"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(ne.a),Tt=function(){var e,t=Object(a.useReactiveVar)(b),n=Object(f.f)(),o=Dt(),s=Object(r.useState)(),l=Object(T.a)(s,2),d=l[0],u=l[1],j=Object(r.useState)(),p=Object(T.a)(j,2),m=p[0],h=p[1];Object(r.useEffect)((function(){t||n.push("/")}),[n,t]);var O=Object(a.useMutation)(Nt,{onCompleted:function(e){var t=z().image,i=e.uploadProduct,a=i.ok,r=i.productId;a&&r&&(t[0]?(h(r),k({variables:{productId:r,file:t[0]}})):(n.push("/product/".concat(r)),window.scrollTo(0,0)))}}),g=Object(T.a)(O,2),x=g[0],v=g[1],y=v.data,C=v.loading,w=Object(a.useMutation)(kt,{onCompleted:function(e){e.uploadImage.ok&&(n.push("/product/".concat(m)),window.scrollTo(0,0))}}),N=Object(T.a)(w,2),k=N[0],D=N[1],I=D.data,M=D.loading,B=Object(ie.a)({mode:"onChange"}),F=B.register,L=B.handleSubmit,z=B.getValues,q=B.watch,R=B.errors,$=B.formState,U=B.reset;return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(_.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Upload Product"})}),Object(i.jsx)("main",{children:Object(i.jsx)(P.a,{maxWidth:"md",children:Object(i.jsxs)(P.a,{className:o.paper,maxWidth:"xs",children:[Object(i.jsx)(G.a,{className:o.avatar,children:Object(i.jsx)(Pt.a,{})}),Object(i.jsx)(W.a,{component:"h1",variant:"h5",children:"Let's sell something!"}),Object(i.jsxs)("form",{className:o.form,noValidate:!0,onSubmit:L((function(){var e=z(),t=e.productName,n=e.description,i=e.startPrice;x({variables:{input:{productName:t,description:n,startPrice:+i}}})})),children:[Object(i.jsx)(It,{variant:"outlined",margin:"normal",fullWidth:!0,name:"productName",label:"Product name",type:"text",id:"productName",required:!0,inputRef:F({required:!0})}),Object(i.jsx)(It,{variant:"outlined",margin:"normal",fullWidth:!0,name:"description",label:"Description",type:"text",id:"description",inputRef:F}),Object(i.jsx)(It,{variant:"outlined",margin:"normal",fullWidth:!0,name:"startPrice",label:"Starting Price",type:"text",id:"startPrice",required:!0,inputRef:F({required:!0,pattern:/^\d+$/}),InputProps:{startAdornment:Object(i.jsx)(ft.a,{position:"start",children:"\u20a9"})}}),"pattern"===(null===(e=R.startPrice)||void 0===e?void 0:e.type)&&Object(i.jsx)(Y,{errorMessage:"Only numbers are allowed"}),Object(i.jsxs)(P.a,{className:o.buttonContainer,children:[Object(i.jsxs)(S.a,{variant:"contained",fullWidth:!0,className:o.button,component:"label",children:[Object(i.jsx)("input",{type:"file",accept:"image/*",id:"image",name:"image",hidden:!0,ref:F,onChange:function(){u(q().image[0].name)}}),"Select File"]}),d&&Object(i.jsxs)(P.a,{className:o.fileList,children:[Object(i.jsx)(W.a,{children:"File : ".concat(d)}),Object(i.jsx)(S.a,{className:o.deleteButton,variant:"contained",onClick:function(){U(),u(null)},children:"Reset"})]})]}),Object(i.jsx)(X,{message:"Upload",loading:C||M,validate:!$.isValid}),(null===y||void 0===y?void 0:y.uploadProduct.error)&&Object(i.jsx)(Y,{errorMessage:y.uploadProduct.error}),(null===I||void 0===I?void 0:I.uploadImage.error)&&Object(i.jsx)(Y,{errorMessage:I.uploadImage.error})]})]})})})]})};function Mt(){var e=Object(L.a)(["\n  mutation editProduct($input: EditProductDto!) {\n    editProduct(input: $input) {\n      ok\n      error\n    }\n  }\n"]);return Mt=function(){return e},e}var St=Object(a.gql)(Mt()),Wt=Object(y.a)((function(e){return{loading:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(24)},paper:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},buttonContainer:{margin:e.spacing(2,0,6),padding:0},button:{backgroundColor:me.a[900],color:"white","&.MuiButton-root:hover":{backgroundColor:"#000051"}},fileList:{padding:e.spacing(2,0),display:"flex",justifyContent:"space-between",alignItems:"center"},deleteButton:{padding:e.spacing(.4,1.2),backgroundColor:"#9a0007",color:"white","&.MuiButton-root:hover":{backgroundColor:"#650000"}}}})),Bt=Object(K.a)({root:{"& label.Mui-focused":{color:"white"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(ne.a),Ft=function(){var e,t,n=Object(f.g)().id,o=Object(f.f)(),s=Wt(),l=Object(r.useState)(),d=Object(T.a)(l,2),u=d[0],j=d[1],p=Object(r.useState)(!1),b=Object(T.a)(p,2),m=b[0],h=b[1],O=Object(r.useState)(!1),g=Object(T.a)(O,2),x=g[0],v=g[1],y=Object(r.useState)(),C=Object(T.a)(y,2),w=C[0],N=C[1],k=R(),D=k.data,I=k.loading,M=Object(a.useLazyQuery)(at),B=Object(T.a)(M,2),F=B[0],L=B[1],z=L.data,q=L.loading;Object(r.useEffect)((function(){var e,t;(n||o.push("/"),n&&F({variables:{input:{productId:+n}}}),!q&&(null===z||void 0===z?void 0:z.productDetail.ok))&&j(null===(e=z.productDetail.product)||void 0===e||null===(t=e.picture)||void 0===t?void 0:t.fileName)}),[o,n,F,q,z]);var $=Object(ie.a)({mode:"onChange"}),U=$.register,E=$.handleSubmit,V=$.getValues,A=$.errors,H=$.formState,K=$.reset,J=$.watch,ee=Object(a.useMutation)(St,{onCompleted:function(e){var t=V().image;e.editProduct.ok&&(m&&(null===z||void 0===z?void 0:z.productDetail.product)&&de({variables:{productId:z.productDetail.product.id,file:t[0]}}),m||(o.push("/product/".concat(w)),window.scrollTo(0,0),window.location.reload()))}}),ne=Object(T.a)(ee,2),ae=ne[0],re=ne[1],ce=re.data,oe=re.loading,se=Object(a.useMutation)(kt,{onCompleted:function(e){e.uploadImage.ok&&(o.push("/product/".concat(w)),window.scrollTo(0,0),window.location.reload())}}),le=Object(T.a)(se,2),de=le[0],ue=le[1],je=ue.data,pe=ue.loading;return Object(i.jsxs)(c.a.Fragment,{children:[Object(i.jsx)(_.a,{children:Object(i.jsx)("title",{children:"Fresh Meat - Edit Product"})}),Object(i.jsx)("main",{children:Object(i.jsx)(P.a,{maxWidth:"md",children:I||q?Object(i.jsx)(P.a,{className:s.loading,children:Object(i.jsx)(Z.a,{size:24,color:"secondary"})}):D&&(null===z||void 0===z?void 0:z.productDetail.ok)&&D.me.id===(null===(e=z.productDetail.product)||void 0===e?void 0:e.seller.id)?Object(i.jsx)(P.a,{maxWidth:"xs",children:Object(i.jsxs)("div",{className:s.paper,children:[Object(i.jsx)(G.a,{className:s.avatar,children:Object(i.jsx)(te.a,{})}),Object(i.jsx)(W.a,{component:"h1",variant:"h5",children:"Let's edit your product!"}),Object(i.jsxs)("form",{className:s.form,noValidate:!0,onSubmit:E((function(){var e,t=V(),i=t.productName,a=t.description,r=t.startPrice;N(null===z||void 0===z||null===(e=z.productDetail.product)||void 0===e?void 0:e.id),ae({variables:{input:{productId:+n,productName:i,description:a,startPrice:+r,deleteImage:x}}})})),children:[Object(i.jsx)(Bt,{variant:"outlined",margin:"normal",fullWidth:!0,name:"productName",label:"New product name",type:"text",id:"productName",required:!0,defaultValue:z.productDetail.product.productName,inputRef:U({required:!0})}),Object(i.jsx)(Bt,{variant:"outlined",margin:"normal",fullWidth:!0,name:"description",label:"New description",type:"text",id:"description",defaultValue:z.productDetail.product.description?z.productDetail.product.description:"",inputRef:U}),Object(i.jsx)(Bt,{variant:"outlined",margin:"normal",fullWidth:!0,name:"startPrice",label:"New starting price",type:"text",id:"startPrice",required:!0,defaultValue:z.productDetail.product.startPrice,inputRef:U({required:!0,pattern:/^\d+$/})}),"pattern"===(null===(t=A.startPrice)||void 0===t?void 0:t.type)&&Object(i.jsx)(Y,{errorMessage:"Only numbers are allowed"}),Object(i.jsxs)(P.a,{className:s.buttonContainer,children:[Object(i.jsxs)(S.a,{variant:"contained",fullWidth:!0,className:s.button,component:"label",children:[Object(i.jsx)("input",{type:"file",accept:"image/*",id:"image",name:"image",hidden:!0,ref:U,onChange:function(){j(J().image[0].name),h(!0),v(!0)}}),"Select File"]}),u&&Object(i.jsxs)(P.a,{className:s.fileList,children:[Object(i.jsx)(W.a,{children:"File : ".concat(u)}),Object(i.jsx)(S.a,{className:s.deleteButton,variant:"contained",onClick:function(){K(),j(null),h(!1),v(!0)},children:"Delete"})]})]}),Object(i.jsx)(X,{message:"Update",validate:!H.isValid,loading:oe||pe}),(null===ce||void 0===ce?void 0:ce.editProduct.error)&&Object(i.jsx)(Y,{errorMessage:ce.editProduct.error}),(null===je||void 0===je?void 0:je.uploadImage.error)&&Object(i.jsx)(Y,{errorMessage:je.uploadImage.error})]})]})}):Object(i.jsx)(Q,{})})})]})},Lt=function(){return Object(i.jsxs)(v.a,{children:[Object(i.jsxs)(f.c,{children:[Object(i.jsxs)(f.a,{path:"/edit-account",exact:!0,children:[Object(i.jsx)(A,{title:"Edit Account"}),Object(i.jsx)(se,{})]}),Object(i.jsxs)(f.a,{path:"/delete-account",exact:!0,children:[Object(i.jsx)(A,{title:"Delete Account"}),Object(i.jsx)(qe,{})]}),Object(i.jsxs)(f.a,{path:"/my-profile",exact:!0,children:[Object(i.jsx)(A,{title:"My Profile"}),Object(i.jsx)(Qe,{})]}),Object(i.jsxs)(f.a,{path:"/product/new",exact:!0,children:[Object(i.jsx)(A,{title:"Upload Product"}),Object(i.jsx)(Tt,{})]}),Object(i.jsxs)(f.a,{path:"/edit-product/:id",exact:!0,children:[Object(i.jsx)(A,{title:"Edit Product"}),Object(i.jsx)(Ft,{})]}),Object(i.jsxs)(f.a,{path:"/login",exact:!0,children:[Object(i.jsx)(A,{title:"Login"}),Object(i.jsx)(mt,{})]}),Object(i.jsxs)(f.a,{path:"/signup",exact:!0,children:[Object(i.jsx)(A,{title:"Sign up"}),Object(i.jsx)(vt,{})]}),Object(i.jsxs)(f.a,{path:"/user/:id",exact:!0,children:[Object(i.jsx)(A,{title:"Profile"}),Object(i.jsx)(Ee,{})]}),Object(i.jsxs)(f.a,{path:"/product/:id",exact:!0,children:[Object(i.jsx)(A,{title:"Product Detail"}),Object(i.jsx)(st,{})]}),Object(i.jsxs)(f.a,{path:"/",exact:!0,children:[Object(i.jsx)(A,{title:"Fresh Meat"}),Object(i.jsx)(Me,{})]}),Object(i.jsxs)(f.a,{children:[Object(i.jsx)(A,{title:"Not Found"}),Object(i.jsx)(Q,{})]})]}),Object(i.jsx)(I,{})]})},zt=n(105),qt=Object(zt.a)({palette:{type:"dark",primary:{light:"#484848",main:"#212121",dark:"#000000",contrastText:"#ffffff"},secondary:{light:"#4c8c4a",main:"#1b5e20",dark:"#003300",contrastText:"#ffffff"}},overrides:{MuiStepIcon:{root:{"&$completed":{color:"#1b5e20"},"&$active":{color:"#1b5e20"}}},MuiCssBaseline:{"@global":{body:{fontSize:"12px",minHeight:"100vh",backgroundColor:"#212121"}}}}});var Rt=function(){var e=Object(O.a)(qt);return Object(i.jsxs)(g.a,{theme:e,children:[Object(i.jsx)(x.a,{}),Object(i.jsx)(Lt,{})]})},$t=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,270)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))};s.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsxs)(a.ApolloProvider,{client:h,children:[Object(i.jsx)(x.a,{}),Object(i.jsx)(_.b,{children:Object(i.jsx)(Rt,{})})]})}),document.getElementById("root")),$t()}},[[190,1,2]]]);
//# sourceMappingURL=main.1159fe6a.chunk.js.map